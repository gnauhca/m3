{"version":3,"sources":["webpack:///webpack/bootstrap 03baddf1c86db839a48a","webpack:///./js/main.js","webpack:///./js/view/view-manager.js","webpack:///./js/view/progress.js","webpack:///./js/view/view.js","webpack:///./js/common/time.js","webpack:///./js/view/select.js","webpack:///./js/stages/select-table.js","webpack:///./js/stages/stage.js","webpack:///./js/config/select-conf.js","webpack:///./js/stages/select-cube.js","webpack:///./js/common/loader.js","webpack:///./css/common.scss","webpack:///./js/stages/select-stars.js"],"names":["require","window","M3","viewManager","appInit","TIME","start","renderer","THREE","WebGLRenderer","antialias","alpha","scene","Scene","document","body","appendChild","domElement","setClearColor","winWidth","innerWidth","winHeight","innerHeight","setSize","camera","PerspectiveCamera","m3Time","tick","addTick","render","addEventListener","aspect","updateProjectionMatrix","axisHelper","AxisHelper","add","fog","Fog","size","step","activateView","_viewConstructors","_views","ViewManager","init","fontSize","htmlElem","querySelector","resize","style","name","active","stages","forEach","stage","data","view","getView","activate","inactivate","views","ProgressView","_$progressWrap","_$progressVal","_$water","_$waterDivs","querySelectorAll","setProgress","display","setTimeout","bind","percent","initColor","finalColor","opacity","currentColor","map","colorVal","i","$waterDiv","backgroundColor","join","innerHTML","transform","toFixed","View","removeView","bodys","delta","stop","addBody","timeBody","push","removeBody","index","indexOf","splice","now","Date","getTime","last","handleFrame","requestAnimationFrame","isStop","ticks","fn","TWEEN","update","Time","tweens","tween","threeObj","target","dur","tweenObj","that","dest","attrs","separater","setInit","key","keyArr","split","subObj","subKey","destKey","test","Color","cKey","Tween","to","easing","Easing","Cubic","InOut","onUpdate","current","currentKey","lookAt","Vector3","x","y","z","pop","call","onComplete","completeRemove","removeTween","SelectView","_selectStarsStage","SelectStar","_products","products","isInit","entry","SelectTable","objects","_BASECROOD","_CAMERACROOD","_t","_controls","_glowMaterial","GlowMaterial","_buildBase","_buildProductLogo","Object","keys","o","position","copy","TrackballControls","staticMoving","addTHREEObjTween","glowSvgMesh","material","uniforms_p_value","uniforms_glowColor_value","glowTable","tableGlow","uniforms","p","value","tableGlowTween","glowMesh","traverse","object","ShaderMaterial","viewVector","subVectors","gui","dat","GUI","parameters","c","cGUI","min","max","listen","onChange","setPandC","pGUI","productNames","_product","removeTick","svgString","options","shape","transformSVGPathExposed","defaultOptions","amount","bevelThickness","bevelSize","bevelSegments","bevelEnabled","curveSegments","steps","svgGemo","$","extend","ExtrudeGeometry","center","tableTopGemo","CylinderGeometry","tableTopMaterial","MeshPhongMaterial","color","transparent","refractionRatio","shininess","specular","tableTop","Mesh","set","tableBottomGemo","tableBottomMaterial","MeshLambertMaterial","DoubleSide","tableBottom","tableGlowMaterial","tableGlowGemo","logo","_createSVGGemo","computeBoundingBox","translate","boundingBox","rotateX","Math","PI","svgMaterial","metal","svgMesh","glowMaterial","clone","scale","multiplyScalar","planeGridCount","gridWidth","planeWidth","planeHeight","phaneGeom","PlaneGeometry","side","plane","rotation","gridGroup","Group","gridMaterial","gridMesh","j","userData","crood","cubeGridCount","cubeWidth","directionalLightColor","directionalLight","DirectionalLight","castShadow","shadowCameraNear","shadowCameraFar","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","distance","intensity","shadowMapHeight","shadowMapWidth","spotLight","SpotLight","spotLight2","logoMaterial","group","len","length","angelStep","Radius","svgOption","product","gemo","mesh","cos","sin","Stage","state","onProgress","onSuccess","remove","SVG","mx6","productName","SelectCube","_PLANEWIDTH","_PLANEHEIGHT","_CUBESIZE","_GRIDXCOUNT","_GRIDZCOUNT","_CUBEHEIGHT","_MINSCALE","_MAXSCALE","_cubes","build","emptySpace","cubeGroup","cubeMaterial","cubeGeom","cube","glowCube","random","scaleV","scaleMin","scaleMax","cubeSize","BoxGeometry","glowCubeGeom","modifier","SubdivisionModifier","modify","_moveCubes","abs","_moveCube","loadedCache","Loader","loadParams","totalSize","loadTasks","_getLoadTasks","Promise","onLoad","reject","loadedSize","loadTask","getLoadedSize","_loadTask","loaded","url","loadMethod","type","res","_getResults","progress","ext","typeExtMap","_params","urlRegx","sizeDefault","params","urls","prototype","toString","param","concat","match","_getLoaderType","imgLoader","ImageLoader","load","xhr","total","xhrLoader","XHRLoader","onload","req","XMLHttpRequest","lengthComputable","event","e","s","createElement","responseText","documentElement","open","send","StarPoint","Line","SelectStars","_gridSize","_starCount","_range","stars","_build","startCrood","isValidCrood","every","star","Star"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 03baddf1c86db839a48a\n **/","import ViewManager from './view/view-manager.js';\nimport Time from 'time.js';\nimport Loader from 'loader.js';\n\n(function() { \nrequire('../css/common.scss');//return;\n\nwindow.M3 = {};\nM3.viewManager = new ViewManager();\n\n// todo: webgl 检查\n// ...\n\n\n/*var loader = new Loader();\nvar progressView = M3.viewManager.getView('progress');\nprogressView.activate();\nloader.load({url: './build/presets.js', size: 100}, function(percent) {\n\tprogressView.setProgress(percent);\n}).then(function() {\n\tprogressView.inactivate();\n\tappInit();\n});*/\n\nappInit();\n\nfunction appInit() {\n\twindow.TIME.start();\n\t// 基本场景\n\tM3.renderer = new THREE.WebGLRenderer({ antialias: true , alpha: true});\n\n\tM3.scene = new THREE.Scene();\n\tdocument.body.appendChild(M3.renderer.domElement);\n\tM3.renderer.setClearColor(0x2abced, 0);\n\n\tvar winWidth = window.innerWidth;\n\tvar winHeight = window.innerHeight;\n\n\tM3.renderer.setSize(winWidth, winHeight);\n\n\n\tM3.camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 5000);\n\n\t// main render tick\n\tvar m3Time = new Time();\n\n\tM3.tick = m3Time.addTick(function() {\n\t\tM3.renderer.render(M3.scene, M3.camera);\n\t});\n\n\n\twindow.addEventListener('resize', function() {\n\t\twinWidth = window.innerWidth;\n\t\twinHeight = window.innerHeight;\n\t\tM3.camera.aspect = winWidth / winHeight;\n\t\tM3.camera.updateProjectionMatrix();\n\t\tM3.renderer.setSize(winWidth, winHeight);\n\t});\n\n\n\t/* helper */\n\tvar axisHelper = new THREE.AxisHelper( 100 );\n\tM3.scene.add( axisHelper );\n\n\n\t/* fog */\n\tvar fog = new THREE.Fog(0xffffff, 0, 2000);\n\tM3.scene.fog = fog;\n\n\tvar size = 400;\n\tvar step = 10;\n\n\t// var gridHelperX = new THREE.GridHelper( size, step, 0xff0000 );\n\t// gridHelperX.rotation.z = Math.PI / 2;\n\t// M3.scene.add( gridHelperX );\n\n\t// var gridHelperY = new THREE.GridHelper( size, step, 0x00ff00 );\n\t// M3.scene.add( gridHelperY );\n\n\t// var gridHelperZ = new THREE.GridHelper( size, step, 0x0000ff );\n\t// gridHelperZ.rotation.x = Math.PI / 2;\n\t// M3.scene.add( gridHelperZ );\n\n\n\n\t// M3.viewManager.activateView('index');\n\t// M3.viewManager.activateView('display', {mobiles: ['pro5'/*, 'pro6', 'mx5', 'mx6'*/]});\n\tM3.viewManager.activateView('select');\t\n}\n\n\n\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/main.js\n **/","import Progress from './progress.js';\n// import Index from './index.js';\nimport Select from './select.js';\n// import Display from './display.js';\n\nvar _viewConstructors = {\n    'progress': Progress,\n    // 'index': Index,\n    'select': Select,\n    // 'display': Display,\n};\n\nvar _views = {};\n\n\nclass ViewManager {\n\n\tconstructor() {\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\t// 所有 view 及其管理的 stages 相应窗口变化\n\t\twindow.addEventListener('resize', (function() {\n\t\t    var winWidth;\n\t\t    var fontSize;\n\t\t    var htmlElem = document.querySelector('html');\n\t\t    function resize() {\n\t\t        winWidth = window.innerWidth;\n\t\t        fontSize = winWidth / 100;\n\t\t        fontSize = fontSize > 10 ? 10 : (fontSize < 5 ? 5 : fontSize);\n\t\t        htmlElem.style.fontSize = fontSize + 'px';\n\n\t\t        for (let name in _views) {\n\t\t        \tif (_views[name].active) { \n\t\t\t            _views[name].resize();\n\t\t\t            _views[name].stages && _views[name].stages.forEach(function(stage) {\n\t\t\t            \tstage.resize && stage.resize();\n\t\t\t            });\t\t        \t\t\n\t\t        \t}\n\n\t\t        }\n\t\t    }\n\t\t    resize();\n\t\t    return resize;\n\t\t})());\t\t\n\t}\n\n    activateView(name, data) {\n        var view = this.getView(name);\n        view.activate(data);\n    }\n\n    inactivateView(name, data) {\n        var view = this.getView(name);\n        view.inactivate(data);\n    }\n\n    getView(name) {\n        if (!_views[name]) {\n            _views[name] = new _viewConstructors[name](this);\n        }\n        return _views[name];\n    }\n\n    removeView(view) {\n    \tdelete views[view.name];\n    }\n\n}\n\nexport default ViewManager;\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/view/view-manager.js\n **/","import View from './view.js';\n\nclass ProgressView extends View {\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._$progressWrap = document.querySelector('#progressView');\n\t\tthis._$progressVal = document.querySelector('#progressVal');\n\t\tthis._$water = document.querySelector('.water');\n\t\tthis._$waterDivs = this._$water.querySelectorAll('div');\n\t\tthis.setProgress(0);\n\t}\n\n\tactivate() { \n\t\tthis._$progressWrap.style.display = 'block';\n\t}\n\n\tinactivate() {\n\t\tsetTimeout(function() {\n\t\t\tthis._$progressWrap.style.display = 'none';\n\t\t}.bind(this), 1000);\n\t}\n\n\tsetProgress(percent) {\n\t\tvar initColor = [246, 11, 55];\n\t\tvar finalColor = [16, 121, 125];\n\t\tvar opacity = 0.3;\n\t\tvar currentColor;\n\n\t\tcurrentColor = finalColor.map(function(colorVal, i) {\n\t\t\treturn initColor[i] + (colorVal - initColor[i]) * percent|0;\n\t\t});\n\n\t\tthis._$waterDivs.forEach(function($waterDiv) {\n\t\t\t$waterDiv.style.backgroundColor = 'rgba(' + currentColor.join(',') + ',' + opacity + ')';\n\t\t});\n\n\t\tthis._$progressVal.innerHTML = (percent*100 | 0) + '%';\n\t\tpercent *= 0.999;\n\t\tthis._$water.style.transform = 'scaleY(' + percent.toFixed(2) + ')';\n\t}\n}\n\nexport default ProgressView;\n\n\n/** WEBPACK FOOTER **\n ** ./js/view/progress.js\n **/","import Time from 'time.js';\n\nclass View extends Time {\n\n    constructor(viewManager) {\n        super();\n        this.viewManager = viewManager;\n        this.stages = []; // 3d 对象\n        this.active = false;\n    }\n\n    // 激活视图，data 为接受的参数\n    activate(data) {\n\n    }\n\n    // 冻结视图，data 为接受的参数\n    inactivate(data) {}\n\n    addStage(stage) {\n\n    }\n\n    // 窗口大小变化的操作\n    resize() {}\n\n    distroy() {\n        super.distroy();\n        this.viewManager.removeView(this);\n    }\n\n}\n\nexport default View;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/view/view.js\n **/","/* 时间 */\nvar TIME = {\n\n\t// 所有时间body对象\n\tbodys : [],\n\tdelta: 16\n}\n\nstop = false;\nTIME.addBody = function(timeBody) {\n\tthis.bodys.push(timeBody);\n}\n\nTIME.removeBody = function(timeBody) {\n\tvar index = this.bodys.indexOf(timeBody);\n\n\tif (index !== -1) {\n\t\tthis.bodys.splice(index, 1);\n\t}\n}\n\nTIME.tick = (function() {\n\tvar now = (new Date()).getTime();\n\tvar last = now;\n\tvar delta;\n\treturn function() {\n\t\tdelta = now - last;\n\t\tdelta = delta > 500 ? 30 : (delta < 16? 16 : delta);\n\t\tTIME.delta = delta;\n\t\tlast = now;\n\n\t\tTIME.handleFrame(delta);\n\t\tif (!stop) {\n\t\t\trequestAnimationFrame(TIME.tick);\n\t\t\t// setTimeout(TIME.tick, 1000);\n\t\t}\t\t\n\t}\t\n})();\n\n\nTIME.start = function() {\n\tstop = false;\n\tthis.tick();\n}\n\nTIME.stop = function() {\n\tstop = true;\n}\n\nTIME.handleFrame = function(delta) { \n\n\tTIME.bodys.forEach(function(body) {\n\t\tif (!body.isStop) {\n\t\t\tbody.ticks.forEach(function(tick) {\n\t\t\t\ttick.fn && tick.fn(delta); \n\t\t\t});\n\t\t}\n\t});\n\n\tTWEEN.update();\n}\n\nwindow.TIME = TIME;\n\n\n/* 时间物体类，提供两个时机，帧更新，固定间隔更新，每一个有时间概念的物体，就继承 */\nclass Time {\n\n\tconstructor() {\n\t\tTIME.addBody(this);\n\t\tthis.ticks = [];\n\t\tthis.tweens = [];\n\t\tthis.isStop = false;\n\t}\n\n\n\t/**\n\t * 该物体灭亡\n\t */\n\tdestory() {\n\t\tTIME.removeBody(this);\n\t}\n\n\t/** \n\t * 帧更新\n\t * @param timegap 与上一帧的时间间隔\n\t */\n\taddTick(fn) {\n\t\tvar tick = {'fn': fn.bind(this)};\n\n\t\ttick.isStop = false;\n\t\tthis.ticks.push(tick);\n\t\treturn tick;\n\t}\n\n\tremoveTick(tick) {\n\t\tif (!tick) {\n\t\t\t// remove all\n\t\t\tthis.ticks = [];\n\t\t\treturn;\n\t\t}\n\n\t\tvar index = this.ticks.indexOf(tick);\n\n\t\tif (index !== -1) {\n\t\t\tthis.ticks.splice(index, 1);\n\t\t}\n\t}\n\n\t/** \n\t * tween\n\t */\n\taddTween(tween) {\n\t\tthis.tweens.push(tween);\n\t}\n\n\t/*\n\t * tweenObj\n\t */\n\taddTHREEObjTween(threeObj, target, dur, tweenObj) {\t\t\n\t\tvar that = this;\n\t\tvar init = {};\n\t\tvar dest = {};\n\t    \n\t    var attrs = ['x', 'y', 'z', 'r', 'g', 'b', 'opacity'];\n\t\tvar separater = '_';\n\n\t\tfunction setInit(key) {\n\t\t\tif (key.indexOf('lookAt') === -1) {\n\t\t\t\tlet keyArr = key.split('_');\n\t\t\t\tlet subObj = threeObj;\n\n\t\t\t\tkeyArr.forEach(function(subKey) { subObj = subObj[subKey]; });\n\t\t\t\tinit[key] = subObj;\n\t\t\t} else {\n\t\t\t\tinit[key] = dest[key]; // lookAt\n\t\t\t}\n\t\t}\n\n\n\t\tfor (let key in target) {\n\t\t\tlet destKey = key;\n\n\t\t\tif (/color/i.test(key) > 0 && !(target[key] instanceof THREE.Color)) {\n\t\t\t\ttarget[key] = new THREE.Color(target[key]);\n\t\t\t}\n\t\t\tif (typeof target[key] === 'object') {\n\t\t\t\tfor (let cKey in target[key]) {\n\t\t\t\t\tdestKey = key;\n\t\t\t\t\tif (attrs.indexOf(cKey) !== -1) {\n\t\t\t\t\t\tdestKey += '_' + cKey;\n\t\t\t\t\t\tdest[destKey] = target[key][cKey];\n\t\t\t\t\t\tsetInit(destKey);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdest[destKey] = target[key];\n\t\t\t\tsetInit(destKey);\n\t\t\t}\n\t\t}\n\n\n\t\t// console.log(init,dest);\n\n\t\tvar tween;\n\t\ttweenObj = tweenObj || {};\n\t\ttween = new TWEEN.Tween(init)\n\t\ttween.to(dest, dur)\n\t\t\t.easing(tweenObj.easing || TWEEN.Easing.Cubic.InOut)\n\t\t\t.onUpdate(function() {\n\t\t\t\tlet current = this;\n\t\t\t\tfor (let currentKey in current) {\n\t\t\t\t\tif (currentKey.indexOf('lookAt') !== -1) {\n\t\t\t\t\t\tlet lookAt = current[currentKey];\n\t\t\t\t\t\tthreeObj.lookAt(new THREE.Vector3(lookAt.x, lookAt.y, lookAt.z));\n\t\t\t\t\t}\n\t\t\t\t\tlet keyArr = currentKey.split('_');\n\t\t\t\t\tlet last = keyArr.pop();\n\t\t\t\t\tlet subObj = threeObj;\n\t\t\t\t\tkeyArr.forEach(function(key) { subObj = subObj[key]; });\n\t\t\t\t\tsubObj[last] = current[currentKey];\n\t\t\t\t}\n\t\t\t\ttweenObj.onUpdate && tweenObj.onUpdate.call(this);\n\t\t\t})\n\t\t\t.onComplete(function() {\n\t\t\t\tvar completeRemove = true;\n\t\t\t\tif (tweenObj.onComplete) {\n\t\t\t\t\tif (tweenObj.onComplete() === false)\n\t\t\t\t\tcompleteRemove = false;\n\t\t\t\t}\n\n\t\t\t\tcompleteRemove && that.removeTween(tween);\n\t\t\t});\n\n\t\tthis.tweens.push(tween);\n\t\treturn tween;\n\t}\n\n\tremoveTween(tween) {\n\t\tif (!tween) {\n\t\t\t// remove all\n\t\t\tthis.tween = [];\n\t\t\treturn;\n\t\t}\n\n\t\tvar index = this.tweens.indexOf(tween);\n\n\t\tif (index !== -1) {\n\t\t\t//tween.stop();\n\t\t\tthis.tweens.splice(index, 1);\n\t\t}\n\t}\n\n\t// stop 暂停时间\n\tstop() {\n\t\tthis.isStop = true;\n\t\tthis.tweens.forEach(function(tween) {\n\t\t\ttween.stop();\n\t\t});\n\t}\n\n\tstart() {\n\t\tthis.isStop = false;\n\t\tthis.tweens.forEach(function(tween) {\n\t\t\ttween.start();\n\t\t});\n\t}\n}\n\nexport default Time;\n\n\n\n\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/common/time.js\n **/","import View from './view.js';\nimport SelectStage from '../stages/select-table.js';\nimport SelectCube from '../stages/select-cube.js';\nimport SelectStars from '../stages/select-stars.js';\nimport selectCfg from 'select-conf.js';\n\n\nclass SelectView extends View {\n\n\tconstructor() {\n\t\tsuper();\n\t\t// this._selectStage = new SelectStage();\n\t\t// this._selectCubeStage = new SelectCube();\n\t\t\n\t\tthis._selectStarsStage = new SelectStar();\n\n\t\tthis._products = selectCfg.products;\n\t\tthis.init();\n\t\t\n\t\t// this.stages.push(this._selectStage); // super\n\t}\n\n\tinit() {\n\n\t}\n\n\tactivate() { \n\t\t// stage init\n\t\t/*if (!this._selectStage.isInit) {\n\t\t\tthis._selectStage.init();\n\t\t}\n\t\tif (!this._selectCubeStage.isInit) {\n\t\t\tthis._selectCubeStage.init();\n\t\t}*/\n\t\tif (!this._selectStarsStage.isInit) {\n\t\t\tthis._selectStarsStage.init();\n\t\t}\n\n\t\t// select animation\n\t\t// this._selectStage.entry()\n\t\t\n\t\tthis._selectStarsStage.entry()\n\t}\n\n\tinactivate() { }\n}\n\nexport default SelectView;\n\n\n/** WEBPACK FOOTER **\n ** ./js/view/select.js\n **/","import Stage from './stage.js';\nimport selectCfg from 'select-conf.js';\n\n// Dependencies CONFIG.selects\nclass SelectTable extends Stage {\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.isInit = false;\n\t\tthis.objects;\n\n\t\tthis._BASECROOD = new THREE.Vector3(0, 0, 0);\n\t\tthis._CAMERACROOD = new THREE.Vector3(0, 100, 400);\n\n\t\tthis._products = {}; // {'pro5': {mesh: xx, glowMesh, selected: false}}\n\n\t\tthis._t;\n\t\tthis._controls;\n\n\t\t// shader\n\t\tthis._glowMaterial;\n\t}\n\n\t// this.objects\n\tinit() {\n\t\tthis._glowMaterial = new THREE.GlowMaterial();\n\n\t\tthis._buildBase();\n\t\tthis._buildProductLogo(); //set products\n\n\n\n        this.isInit = true;\n\t}\n\n\tentry() {\n\n\t\tObject.keys(this.objects).forEach(function(o) { M3.scene.add(this.objects[o]);}.bind(this));\n\n\t\tthis.camera.position.copy(this._CAMERACROOD);\n\t\tthis.camera.lookAt(this._BASECROOD);\n\t\tthis._controls = new THREE.TrackballControls(this.camera, M3.renderer.domElement);\n\t\tthis._controls.staticMoving = true;\n\n\n\t\t// this.addTHREEObjTween(mesh.material, {color: new THREE.Color(0x0cbbef), emissive: new THREE.Color(0xcccccc)}, 3000).start();\n\n\t\tthis.addTHREEObjTween(this.objects.glowSvgMesh.material, {\n\t\t\tuniforms_p_value: 0.05,\n\t\t\tuniforms_glowColor_value: 0xffffff\n\t\t}, 4000).start();\n\n\n\n\t\tvar glowTable = function() {\n\t\t\tvar uniforms_p_value = this.objects.tableGlow.material.uniforms.p.value === 1.5 ? 5.7 : 1.5;\n\t\t\tlet tableGlowTween = this.addTHREEObjTween(this.objects.tableGlow.material, {\n\t\t\t\tuniforms_p_value: uniforms_p_value,\n\t\t\t}, 4000, {\n\t\t\t\tonComplete() { glowTable()}\n\t\t\t}).start();\t\t\t\n\t\t}.bind(this);\n\n\t\tglowTable();\n\n\t\t// glow vertor\n\t\tthis._t = this.addTick(function(delta) {\n\t\t\tthis._controls.update(delta);\n\t\t\t\n\t\t\tlet glowMesh;\n\n\t\t\tM3.scene.traverse(function(object) {\n\t\t\t\tif (object.material && object.material instanceof THREE.ShaderMaterial) {\n\t\t\t\t\tobject.material.uniforms.viewVector.value = \n\t\t\t\t\tnew THREE.Vector3().subVectors(this.camera.position, object.position);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t});\n\n\t\t// shader test \n\t\tvar gui = new dat.GUI();\n\t\tvar parameters = { c: 0.5, p: 4.0 };\n\t\tvar cGUI = gui.add( parameters, 'c' ).min(0.0).max(1.0).step(0.01).name(\"c\").listen();\n\t\tcGUI.onChange(\n\t\t    function(value) { \n\t\t\t\tsetPandC(parameters.p, parameters.c); \n\t\t    }\n\t\t);\n\n\t\tvar pGUI = gui.add(parameters, 'p').min(0.0).max(6.0).step(0.01).name(\"p\").listen();\n\t\tpGUI.onChange(\n\t\t    function(value) { \n\t\t\t\tsetPandC(parameters.p, parameters.c);\n\t\t    }\n\t\t);\n\n\t\tfunction setPandC(p, c) {\n\t\t\tM3.scene.traverse(function(object) {\n\t\t\t\tif (object.material && object.material instanceof THREE.ShaderMaterial) {\n\t\t\t\t\tobject.material.uniforms[\"p\"].value = p; \n\t\t\t\t\tobject.material.uniforms[\"c\"].value = c; \n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tselectProduct(productNames) {\n\t\tthis._products.forEach(function(_product) {\n\n\t\t});\n\t}\n\n\tleave() {\n\t\t// or return a promise so that can do some ani\n\t\tthis.removeTick(); \n\t}\n\n\t_createSVGGemo(svgString, options) {\n\t\tvar shape = transformSVGPathExposed(svgString);\n\t\tvar defaultOptions = {\n            amount: 5,\n            bevelThickness: 0,\n            bevelSize: 0,\n            bevelSegments: 12,\n            bevelEnabled: false,\n            curveSegments: 80,\n            steps: 1\n        };\n        var svgGemo;\n\n        options = $.extend({}, defaultOptions, options);\n\t\tsvgGemo = new THREE.ExtrudeGeometry(shape, options)\n        svgGemo.center();\t\n        return svgGemo;\n\t}\n\n\t_buildBase() {\n\n\t\t// TABLE 2m width\n\t\tvar tableTopGemo = new THREE.CylinderGeometry(100, 100, 3, 100);\n\t\tvar tableTopMaterial = new THREE.MeshPhongMaterial({color: 0xaaaaff});\n\n\t\ttableTopMaterial.transparent = true;\n\t\ttableTopMaterial.opacity = 0.3;\n\t\ttableTopMaterial.refractionRatio = 1.3;\n\t\t// tableTopMaterial.reflectivity = 1;\n\t\ttableTopMaterial.shininess = 37.46;\n\t\ttableTopMaterial.specular = new THREE.Color(\"rgb(0.54, 0.54, 0.54)\");\n\n\t\tvar tableTop = new THREE.Mesh(tableTopGemo, tableTopMaterial);\n\t\ttableTop.position.set(0, 33, 0);\n\n\n\t\tvar tableBottomGemo = new THREE.CylinderGeometry(100, 90, 30, 100, 10);\n\t\tvar tableBottomMaterial = new THREE.MeshLambertMaterial({color: 0x3a5c67,'side': THREE.DoubleSide, 'emissive': 0x888888}); \n\t\tvar tableBottom = new THREE.Mesh(tableBottomGemo, tableBottomMaterial);\n\t\ttableBottom.position.set(0, 15, 0);\n\n\t\tthis.objects.tableTop = tableTop;\n\t\tthis.objects.tableBottom = tableBottom;\n\n\t\tvar tableGlowMaterial = new THREE.GlowMaterial({c: 0.12, p: 6, color: new THREE.Color(0x0cbbef)});\n\t\tvar tableGlowGemo = new THREE.CylinderGeometry(100, 99.5, 2, 100, 10);\n\t\tvar tableGlow = new THREE.Mesh(tableGlowGemo, tableGlowMaterial);\n\t\ttableGlow.position.set(0, 31, 0);\n\n\t\tthis.objects.tableTop = tableTop;\n\t\tthis.objects.tableBottom = tableBottom;\n\t\tthis.objects.tableGlow = tableGlow;\n\n\t\t// MEIZU LOGO\n\t\tvar svgString = selectCfg.logo;\n\t\tvar options = {\n            amount: 5,\n            bevelThickness: 0.5,\n            bevelSize: 0.5,\n            bevelSegments: 12,\n            bevelEnabled: true,\n            curveSegments: 80,\n            steps: 1\n        };\n        var svgGemo = this._createSVGGemo(svgString, options);\n        svgGemo.computeBoundingBox()\n        svgGemo.translate(0, -svgGemo.boundingBox.max.y, 0);\n        svgGemo.rotateX(Math.PI);\n\n        var svgMaterial = new THREE.MeshPhongMaterial({color: 0x0cbbef, shininess: 100, metal: true});\n        var svgMesh = new THREE.Mesh(svgGemo, svgMaterial);\n        svgMesh.position.set(0, 0, 150);\n        // this.objects.svgLogo = svgMesh;\n\n\n        var glowMaterial = new THREE.GlowMaterial({c: 0.12, p: 5, color: 0x0cbbef});\n        var glowSvgMesh = new THREE.Mesh(svgGemo.clone(), glowMaterial);\n\t\tglowSvgMesh.position.copy(svgMesh.position);\n\t\tglowSvgMesh.scale.multiplyScalar(1.1);\n\t\tthis.objects.glowSvgMesh = glowSvgMesh;\n\n\t\t// PLANE & GRID & cube\n\t\t\n\t\t// PLANE \n\t\tvar planeGridCount = 30;\n\t\tvar gridWidth = 100;\n\t\tvar planeWidth = planeGridCount * gridWidth;\n\t\tvar planeHeight = planeGridCount * gridWidth;\n\t\tvar phaneGeom = new THREE.PlaneGeometry(planeWidth, planeHeight, planeGridCount, planeGridCount);\n\t\tvar material = new THREE.MeshPhongMaterial( {color: 0x3a5c67, side: THREE.DoubleSide} );\n\t\t// var material = new THREE.MeshBasicMaterial( {color: 0x333333, side: THREE.DoubleSide} );\n\t\tvar plane = new THREE.Mesh( phaneGeom, material );\n\t\tplane.rotation.x = Math.PI * 0.5;\n\t\tplane.position.y -= 1;\n\t\tthis.objects.plane = plane;\n\n\n\t\t// GRID \n\t\tvar gridGroup = new THREE.Group();\n\t\tvar gridMaterial = new THREE.MeshPhongMaterial({color: 0xdddddd, side: THREE.DoubleSide});\n\t\tvar gridMaterial = this._glowMaterial.clone();\n\t\tvar gridMesh;\n\n\n\t\tfor (let i = 0; i < planeGridCount; i++) {\n\t\t\tfor (let j = 0; j < planeGridCount; j++) {\n\t\t\t\tif ( (i % 2 && !(j % 2)) || (!(i % 2) && j % 2) ) {\n\t\t\t\t\tgridMesh = new THREE.Mesh(\n\t\t\t\t\t\tnew THREE.PlaneGeometry(gridWidth, gridWidth, 1, 1), \n\t\t\t\t\t\tgridMaterial\n\t\t\t\t\t);\n\t\t\t\t\tgridMesh.userData.crood = {x: i, y: j};\n\t\t\t\t\tgridMesh.rotation.x = -Math.PI * 0.5;\n\t\t\t\t\tgridMesh.position.set(i * gridWidth - planeWidth/2, 0.1, j * gridWidth - planeHeight/2);\n\t\t\t\t\tgridGroup.add(gridMesh);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.objects.gridGroup = gridGroup;\n\n\n\t\t// CUBE corner\n\t\tvar cubeGridCount = 35;\n\t\tvar cubeWidth = planeWidth / cubeGridCount;\n\n\n\n\t\t// light\n        var directionalLightColor = \"#ffffff\";\n        var directionalLight = new THREE.DirectionalLight(directionalLightColor);\n        directionalLight.name = this.name + ' directionalLight';\n        directionalLight.position.set(-100, 50, 50);\n        directionalLight.castShadow = true;\n        directionalLight.shadowCameraNear = 0;\n        directionalLight.shadowCameraFar = 300;\n        directionalLight.shadowCameraLeft = -200;\n        directionalLight.shadowCameraRight = 200;\n        directionalLight.shadowCameraTop = 200;\n        directionalLight.shadowCameraBottom = -200;\n\n        directionalLight.distance = 0;\n        directionalLight.intensity = 0.5;\n        directionalLight.shadowMapHeight = 1024;\n        directionalLight.shadowMapWidth = 1024;\n        directionalLight.target.lookAt(this._BASECROOD); \n        // this.objects.directionalLight = directionalLight;\n\n \t\tthis.objects.spotLight = new THREE.SpotLight(0xffffff);\n \t\tthis.objects.spotLight.intensity = 0.8;\n \t\tthis.objects.spotLight.position.set(-300, 200, 100);\n \t\tthis.objects.spotLight.lookAt(this._BASECROOD); \n\n \t\tthis.objects.spotLight2 = new THREE.SpotLight(0xffffff);\n \t\tthis.objects.spotLight2.intensity = 0.5;\n \t\tthis.objects.spotLight2.position.set(100, 200, -100);\n \t\tthis.objects.spotLight2.lookAt(this._BASECROOD); \n\t}\n\n\t_buildProductLogo() {\n\t\tvar logoMaterial = new THREE.MeshPhongMaterial({color: 0x999999});\n\t\tvar group = new THREE.Group();\n\t\tvar len = selectCfg.products.length;\n\t\tvar angelStep = Math.PI * 2 / len;\n\t\tvar Radius = 90;\n\t\tvar y = 32;\n\t\tvar x;\n\t\tvar z;\n\n\t\tvar svgOption = {\n            amount: 1,\n            bevelThickness: 0.1,\n            bevelSize: 0.1,\n            bevelSegments: 12,\n            bevelEnabled: false,\n            curveSegments: 80,\n            steps: 1\n        };\n\n\t\tselectCfg.products.forEach(function(product, i) {\n\t\t\tvar gemo = this._createSVGGemo(product.svgString, svgOption);\n\t\t\tvar mesh = new THREE.Mesh(gemo, logoMaterial/*.clone()*/);\n\t\t\t\n\t\t\tvar glowMesh = new THREE.Mesh(gemo.clone(), this._glowMaterial.clone());\n\n\n\t\t\tx = Radius * Math.cos(angelStep * i);\n\t\t\tz = Radius * Math.sin(angelStep * i);\n\n\t\t\tthis._products[product.name] = {'mesh': mesh, 'glowMesh': glowMesh, 'selected':false};\n\n\t\t\tmesh.scale.set(0.15, 0.15, 0.15);\n\t\t\tmesh.position.set(x, y, z);\n\t\t\tmesh.rotation.x = Math.PI / 2;\n\t\t\tmesh.rotation.z = Math.PI / 2 + angelStep * i;\n\n\t\t\tglowMesh.scale.set(0.15, 0.15, 0.15).multiplyScalar(1.2);;\n\t\t\tglowMesh.position.set(x, y, z);\n\t\t\tglowMesh.rotation.x = Math.PI / 2;\n\t\t\tglowMesh.rotation.z = Math.PI / 2 + angelStep * i;\n\n\t\t\t// group.add(glowMesh);\n\t\t\tgroup.add(mesh);\n\t\t}.bind(this));\n\n\t\tthis.objects.products = group;\n\t}\n}\n\nexport default SelectTable;\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/stages/select-table.js\n **/","import Time from 'time.js';\n\nclass Stage extends Time {\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.objects = {};\n\t\tthis.state; // unload, loading, setup, animate\n\t\tthis.isInit = false;\n\t\tthis.scene;\n\n\t\t// 如果不使用默认的 M3 scene 重写constructor 设置新的scene\n\t\tthis.scene = M3.scene;\n\t\tthis.camera = M3.camera;\n\t}\n\n\t// 加载，接受 进度回调， 成功回调\n\tload(onProgress, onSuccess) {\n\n\t}\n\n\t// 装载 3d 对象\n\tinit(onProgress, onSuccess) {\n\t\t\n\t}\n\n\tresize() {\n\t\t\n\t}\n\n\t// 从 M3.scene 中移除\n\tremove() {\n\t\tfor (var name in this.objects) {\n\t\t\tthis.scene.remove(this.objects[name]);\n\t\t}\n\t}\n\n\tdestory() {\n\t\tsuper.destory(); // remove tick of time\n\t\tthis.remove();\n\t\tfor (var name in this.objects) {\n\t\t\tdelete this.objects[name];\n\t\t}\n\t}\n}\n\nexport default Stage;\n\n\n/** WEBPACK FOOTER **\n ** ./js/stages/stage.js\n **/","var products = ['pro6', 'pro5', 'mx5', 'mx6', 'meilan3s', 'meilan3', 'meilannote3'];\n\nvar SVG = {\n\tlogo: 'M22.8,41H3c-1.7,0-3,1.4-3,3v15.1h3.6V45.2c0-0.7,0.5-1.2,1.2-1.2h6.3v15.2h3.6V44H21c0.7,0,1.2,0.5,1.2,1.2v13.9h3.5V44C25.8,42.4,24.4,41,22.8,41zM29.6,44v12.1c0,1.7,1.3,3,3,3H48v-2.9H34.3c-0.7,0-1.2-0.5-1.2-1.2v-3.4h14.1v-3H33.1v-3.4c0-0.7,0.5-1.2,1.2-1.2H48V41H32.6C30.9,41,29.6,42.4,29.6,44zM75.3,41H59.4v2.9h13.1L59.9,55.1c-2,1.7-0.7,4,1,4H77v-2.9H63.6L76.2,45C78.3,43.1,77,41,75.3,41zM96.5,41v13.9c0,0.7-0.5,1.2-1.2,1.2l0,0H85.1l0,0c-0.7,0-1.2-0.5-1.2-1.2V41h-3.5v15.1c0,1.7,1.3,3,3,3H97c1.7,0,3-1.3,3-3V41H96.5zM51.8 41L55.5 41L55.5 59.1L51.8 59.1z',\n\n\tproducts: []\n\n}\n\nvar mx6 = 'M0,66.5h1.9l0,0V37.9l15.4,28.6h1.9l15.2-28.6h0.3v28.6h1.9V34.8h-3L18.2,64L3,34.8H0V66.5zM41.4,34.8l12.9,14.1l1.6-1.4L43.6,34.8M73.1,34.8L60.2,48.9l-1.6-1.4l12.2-12.7H73.1zM41.4,66.5l12.9-14.1l1.6,1.4L43.6,66.5M73.1,66.5L60.2,52.4l-1.6,1.4l12.2,12.7H73.1zM88.7,66.5c-4.1,0-6.9-1.1-8.5-3.3c-1.4-2-2-4.8-2-9.2c0-8,1-12.4,3.3-15.1c2.5-2.8,6.7-4,14-4c0.2,0,0.5,0,1.8,0l0,0l0.1,1.3l-1.7,0c-7.8,0.2-15.1,0.4-15.7,11.7l0,0.6l0.7-0.1c2.7-0.3,6.4-0.7,8.8-0.7c6.5,0,10.5,1.5,10.5,9.2c0,3.7-1,6.2-3,7.6C95.2,65.8,92.6,66.5,88.7,66.5z M80,50.3c-0.1,1.8-0.1,3-0.1,4.3c0,5.2,1,10.5,8.7,10.5c7,0,9.7-2.3,9.7-8.3c0-3.2-0.8-5.2-2.6-6.4c-1.5-1-3.6-1.4-7.2-1.4c-1.6,0-4.3,0.2-8.1,0.8L80,49.8L80,50.3z'\n\nproducts.forEach(function(productName) {\n\tSVG.products.push(\n\t\t{\"name\": productName, svgString: mx6}\n\t);\n});\n\nexport default SVG;\n\n\n\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/config/select-conf.js\n **/","import Stage from './stage.js';\n\n// Dependencies CONFIG.selects\nclass SelectCube extends Stage {\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.objects;\n\t\tthis._BASECROOD = new THREE.Vector3();\n\t\tthis._PLANEWIDTH = 1500;\n\t\tthis._PLANEHEIGHT = 1500;\n\t\tthis._CUBESIZE = 60; // 立方体大小\n\t\tthis._GRIDXCOUNT = (this._PLANEWIDTH / this._CUBESIZE)|0; // 横向个数\n\t\tthis._GRIDZCOUNT = (this._PLANEHEIGHT / this._CUBESIZE)|0; // 纵向 Z(向) 个数\n\t\tthis._CUBEHEIGHT = 400;\n\t\tthis._MINSCALE = 0.1; // 最小高度缩放\n\t\tthis._MAXSCALE = 0.6; // 最大高度缩放\n\t\tthis._cubes; // 存储方块信息的二维数组\t\t\n\t\tthis.isInit = false;\n\t}\n\n\t// this.objects\n\tinit() {\n\t\tthis.build();\n        this.isInit = true;\n\t}\n\n\tbuild() {\n\n\t\t// cubes\n\t\tthis._cubes = [];\n\n\t\tvar emptySpace = 0.3;\n\t\tvar cubeGroup = new THREE.Group();\n\t\tvar cubeMaterial;\n\t\tvar cubeGeom;\n\t\tvar cube;\n\t\tvar glowCube;\n\n\t\tfor (let i = 0; i < this._GRIDXCOUNT; i++ ) {\n\t\n\t\t\tfor (let j = 0; j < this._GRIDZCOUNT; j++ ) {\n\n\t\t\t\tvar x = this._BASECROOD.x - this._GRIDXCOUNT / 2 + i;\n\t\t\t\tvar z = this._BASECROOD.z - this._GRIDZCOUNT / 2 + j;\n\t\t\t\tif (x * x + z * z < this._GRIDXCOUNT * emptySpace * this._GRIDXCOUNT * emptySpace ||\n\t\t\t\t\t(Math.random() + 0.5) | 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis._cubes[i] = this._cubes[i] || [];\n\t\t\t\tthis._cubes[i][j] = {\n\t\t\t\t\tposition: {x: x, y: 0, z: z},\n\t\t\t\t\tscaleV: (Math.random() / 6000), // 缩放速度每一帧缩放 0.??\n\t\t\t\t\tscaleMin: this._MINSCALE + (this._MAXSCALE - this._MINSCALE) * Math.random() / 2,\n\t\t\t\t\tscaleMax: this._MAXSCALE - (this._MAXSCALE - this._MINSCALE) * Math.random() / 2, // 缩放范围\n\t\t\t\t};\n\t\t\t\t// console.log(this._cubes[i][j].position);\n\t\t\t\t// \n\t\t\t\tvar cubeSize = this._CUBESIZE *  (0.2 + 0.5 * Math.random());\n\t\t\t\tcubeGeom = new THREE.BoxGeometry(\n\t\t\t\t\t\t\t\tcubeSize, \n\t\t\t\t\t\t\t\tthis._CUBEHEIGHT, \n\t\t\t\t\t\t\t\tcubeSize,2,2,2\n\t\t\t\t\t\t\t);\n\t\t\t\tcubeMaterial = new THREE.MeshLambertMaterial(\n\t\t\t\t\t{\n\t\t\t\t\t\tcolor: 0xffffff,\n\t\t\t\t\t\t// transparent: true,\n\t\t\t\t\t\t// opacity: 0.9,\n\t\t\t\t\t\t// reflectivity: 1,\n\t\t\t\t\t\t// specular: 0xdddddd,\n\t\t\t\t\t\t// shininess: 90\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tcube = new THREE.Mesh(cubeGeom, cubeMaterial);\n\t\t\t\tcube.position.set(\n\t\t\t\t\t(this._cubes[i][j].position.x + Math.random() - 0.5) * this._CUBESIZE,\n\t\t\t\t\t0,\n\t\t\t\t\t(this._cubes[i][j].position.z + Math.random() - 0.5) * this._CUBESIZE\n\t\t\t\t);\n\t\t\t\tcube.scale.set(1, 0.01, 1);\n\t\t\t\tthis._cubes[i][j].cube = cube;\n\n\t\t\t\tvar glowCubeGeom = new THREE.BoxGeometry(\n\t\t\t\t\tcubeSize * 1.4, \n\t\t\t\t\tthis._CUBEHEIGHT  * 1.1, \n\t\t\t\t\tcubeSize * 1.4, 3, 8, 3\n\t\t\t\t);\n\t\t\t\tvar modifier = new THREE.SubdivisionModifier( 1 );\n\t\t\t\tmodifier.modify( glowCubeGeom ); \n\t\t\t\tglowCube = new THREE.Mesh(\n\t\t\t\t\tglowCubeGeom,\n\t\t\t\t\tnew THREE.GlowMaterial({\n\t\t\t\t\t\tc: 0.34,\n\t\t\t\t\t\tp: 2.8,\n\t\t\t\t\t\to: 0.3,\n\t\t\t\t\t\tcolor: new THREE.Color(0xffffff),\n\t\t\t\t\t\ttransparent: true\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\t\n\t\t\t\tglowCube.position.copy(cube.position);\n\t\t\t\tglowCube.scale.copy(cube.scale);\n\t\t\t\tthis._cubes[i][j].glowCube = glowCube;\n\n\t\t\t\tcubeGroup.add(cube);\n\t\t\t\tcubeGroup.add(glowCube);\n\n\n\n\t\t\t}\n\t\t}\n\n\t\tthis.objects.cubeGroup = cubeGroup;\n\n\n\t}\n\n\tentry() {\n\t\tObject.keys(this.objects).forEach(function(o) { M3.scene.add(this.objects[o]);}.bind(this));\n\t\tthis._moveCubes();\n\t}\n\n\tleave() {\n\t\t// or return a promise so that can do some ani\n\t\tthis.removeTick(); \n\t}\n\n\t_moveCube(cube) {\n\t\tvar that = this;\n\t\tvar target = {};\n\t\tvar dur;\n\n\t\tcube.scaleMin = this._MINSCALE + (this._MAXSCALE - this._MINSCALE) * Math.random() / 2;\n\t\tcube.scaleMax = this._MAXSCALE - (this._MAXSCALE - this._MINSCALE) * Math.random() / 2; // 缩放范围\n\t\t\n\t\tif (cube.cube.scale.y <= cube.scaleMin) {\n\t\t\ttarget.scale = new THREE.Vector3(1, cube.scaleMax + 0.01, 1);\n\t\t} else if (cube.cube.scale.y >= cube.scaleMax) {\n\t\t\ttarget.scale = new THREE.Vector3(1, cube.scaleMin - 0.01, 1);\n\t\t} else {\n\t\t\ttarget.scale = new THREE.Vector3(1, cube.scaleMin - 0.01, 1);\n\t\t}\n\t\t// target.scale.x = target.scale.z = target.scale.y < 0.7 ? 0.7: target.scale.y;\n\t\t// target.rotation = new THREE.Euler( 0, cube.cube.rotation.y + Math.random() * Math.PI * (1 - Math.random()), 0, 'XYZ' );\n\n\t\tdur = Math.abs(target.scale.y - cube.cube.scale.y) / cube.scaleV;\n\t\t\n\t\tcube.tween = that.addTHREEObjTween(cube.cube, target, dur, {\n\t\t\tonUpdate: function() {\n\t\t\t\tcube.glowCube.scale.copy(cube.cube.scale)//.multiplyScalar(1.5);\n\t\t\t\t//cube.glowCube.scale.y = cube.cube.scale.y + 0.2;\n\t\t\t},\n\t\t\tonComplete: function() {\n\t\t\t\t// console.log(target);\n\t\t\t\tthat.removeTween(cube.tween);\n\t\t\t\tthat._moveCube(cube);\n\t\t\t}\n\t\t});\n\t\tcube.tween.start();\n\n\n\t}\n\n\t// Normal 方块移动\n\t_moveCubes() {\n\t\tfor (let cube, i = this._cubes.length - 1; i >= 0; i--) {\n\t\t\tif (!this._cubes[i]) { continue; }\n\t\t\tfor (let j = this._cubes[i].length - 1; j >= 0; j--) {\n\t\t\t\tif (!this._cubes[i][j]) { continue; }\n\t\t\t\tcube = this._cubes[i][j];\n\t\t\t\tthis._moveCube(cube);\n\t\t\t};\n\t\t};\n\t}\n\n\n\n}\n\nexport default SelectCube;\n\n\n/** WEBPACK FOOTER **\n ** ./js/stages/select-cube.js\n **/","// 下载缓存\nvar loadedCache = {};\n\nclass Loader {\n\tconstructor() {}\n\n\tcalculateSize(loadParams) {\n\t\tvar totalSize = 0;\n\t\tvar loadTasks = this._getLoadTasks(loadParams);\n\n\t\tfor (var i = 0; i < loadTasks.length; i++) {\n\t\t\ttotalSize += loadTasks[i].size;\n\t\t}\n\t\treturn totalSize;\n\t}\n\n\t// Params 下载任务格式 {url: xx, size: xx}\n\tload(loadParams, onProgress) {\n\t\tvar that = this;\n\t\treturn new Promise(function(onLoad, reject) {\n\t\t\tvar totalSize = 0; // 总大小\n\t\t\tvar loadedSize = 0; // 已经下载大小\n\t\t\tvar loadTasks = [];\n\t\t\tvar loadTask;\n\n\t\t\tloadTasks = that._getLoadTasks(loadParams); \n\n\t\t\tfunction getLoadedSize() {\n\t\t\t\tvar loadedSize = 0;\n\t\t\t\tloadTasks.forEach(function(_loadTask) { \n\t\t\t\t\tloadedSize += _loadTask.loaded\n\t\t\t\t});\n\t\t\t\treturn loadedSize;\n\t\t\t}\n\t\t\tfor (var i = 0; i < loadTasks.length; i++) {\n\t\t\t\tloadTask = loadTasks[i];\n\t\t\t\tloadTask.loaded = 0;\n\t\t\t\ttotalSize += loadTask.size;\n\n\t\t\t\tif (loadedCache[loadTask.url]) {\n\t\t\t\t\tloadTask.loaded = loadTask.size;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t(function(loadTask) {\n\t\t\t\t\tloadMethod[loadTask.type](loadTask.url, function(res) {\n\t\t\t\t\t\tloadedCache[loadTask.url] = res;\n\t\t\t\t\t\tloadTask.loaded = loadTask.size;\n\n\t\t\t\t\t\t// 成功回调\n\t\t\t\t\t\tif (getLoadedSize() / totalSize === 1) {\n\t\t\t\t\t\t\tonLoad(that._getResults(loadParams));\n\t\t\t\t\t\t}\n\t\t\t\t\t}, function(progress) {\n\t\t\t\t\t\tloadTask.loaded = loadTask.size * progress;\n\t\t\t\t\t\tonProgress(getLoadedSize() / totalSize);\n\t\t\t\t\t});\n\t\t\t\t})(loadTask);\n\t\t\t}\t\t\t\n\t\t});\n\n\t}\n\n\t// 获取下载类型\n\t_getLoaderType(ext) {\n\t\tvar typeExtMap = {\n\t\t\t'img': /(jpg|jpeg|gif|png)/,\n\t\t\t'json': /json/,\n\t\t\t'js': /js/\n\t\t};\n\n\t\tfor (var type in typeExtMap) {\n\t\t\tif (typeExtMap[type].test(ext)) {\n\t\t\t\treturn type;\n\t\t\t}\n\t\t}\n\t}\n\n\t// 收集下载参数里的 url\n\t_getLoadTasks(_params) { \n\t\tvar urlRegx = /.+\\.(\\w{1,6})$/;\n\t\tvar sizeDefault = {\n\t\t\t'img': 100,\n\t\t\t'json': 100\t\n\t\t};\n\t\tvar that = this;\n\n\t\tfunction _getLoadTasks(params) {\n\t\t\tvar urls = [];\n\t\t\tvar type;\n\n\t\t\tif (Object.prototype.toString.call(params) === '[object Array]') {\n\t\t\t\tparams.forEach(function(param) {\n\t\t\t\t\turls = urls.concat(_getLoadTasks(param));\n\t\t\t\t});\n\t\t\t} else if (typeof params === 'object' && !params.url){\n\t\t\t\tfor (var key in params) {\n\t\t\t\t\turls = urls.concat(_getLoadTasks(params[key]));\n\t\t\t\t}\n\t\t\t} else if (typeof params === 'object' && params.url) {\n\t\t\t\t// 符合资源格式 {url: xx, size: xx}\n\t\t\t\ttype = params.url.match(urlRegx)[1];\n\n\t\t\t\turls.push({\n\t\t\t\t\t'url': params.url,\n\t\t\t\t\t'size': (params.size || sizeDefault[type] || 1),\n\t\t\t\t\t'type': that._getLoaderType(type)\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn urls;\n\t\t}\n\t\treturn _getLoadTasks(_params);\n\t}\n\n\t// 遍历下载参数里的 url， 替换成下载结果缓存\n\t_getResults(_params) {\n\t\tvar params = $.extend(true, {}, _params);\n\n\t\tfunction _getResults(params) {\n\t\t\tif (Object.prototype.toString.call(params) === '[object Array]') {\n\t\t\t\treturn (params.map(function(param) {\n\t\t\t\t\treturn _getResults(param);\n\t\t\t\t}));\n\t\t\t} else if (typeof params === 'object' && !params.url) {\n\t\t\t\tfor (var key in params) {\n\t\t\t\t\tparams[key] =  _getResults(params[key]);\n\t\t\t\t}\n\t\t\t\treturn params;\n\t\t\t} else if (typeof params === 'object' && params.url) {\n\t\t\t\treturn loadedCache[params.url];\n\t\t\t} else {\n\t\t\t\treturn params;\n\t\t\t}\n\t\t}\n\n\t\treturn _getResults(params);\n\t}\n}\n\n\n/*\n * 下载 URL等配置在loadconfig.params 中\n * loadMethod 根据不同type 应用相应策略下载资源缓存在 loaded cache 中\n * img直接缓存 url \n */\nvar loadMethod = {\n\n\t// 下载图片\n\t'img': function(url, onLoad, onProgress) {\n\t\tvar imgLoader = new THREE.ImageLoader();\n\t\timgLoader.load(url, function() {\n\t\t\tonLoad(url);\n\t\t}, function(xhr) {\n\t\t\treturn onProgress(xhr.loaded / xhr.total);\n\t\t});\n\t},\n\n\t// 下载 dae 模型\n\t'json': function(url, onLoad, onProgress) {\n\t\tvar xhrLoader = new THREE.XHRLoader();\n\t\txhrLoader.load(url, onLoad, function(xhr) {\n\t\t\treturn onProgress(xhr.loaded / xhr.total);\n\t\t});\n\t},\n\n\t// 下载 script \n\t'js': function(url, onload, onProgress) {\n\n\t\tvar req = new XMLHttpRequest();\n\n\t\t// report progress events\n\t\treq.addEventListener(\"progress\", function(xhr) {\n\t\t    if (xhr.lengthComputable) {\n\t\t        onProgress(xhr.loaded / xhr.total);\n\t\t    }\n\t\t}, false);\n\n\t\t// load responseText into a new script element\n\t\treq.addEventListener(\"load\", function(event) {\n\t\t    var e = event.target;\n\t\t    var s = document.createElement(\"script\");\n\t\t    s.innerHTML = e.responseText;\n\t\t    // or: s[s.innerText!=undefined?\"innerText\":\"textContent\"] = e.responseText\n\t\t    document.documentElement.appendChild(s);\n\t\t\tonload();\n\t\t    /*s.addEventListener(\"load\", function() {\n\t\t    \tconsole.log(1);\n\t\t        \n\t\t    });*/\n\t\t}, false);\n\n\t\treq.open(\"GET\", url);\n\t\treq.send();\n\t}\n}\n\nexport default Loader;\n\n\n/** WEBPACK FOOTER **\n ** ./js/common/loader.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./css/common.scss\n ** module id = 11\n ** module chunks = 0\n **/","import Time from './time.js';\nimport Stage from './stage.js';\nimport selectCfg from 'select-conf.js';\n\nclass StarPoint extends Time {\n\n}\n\nclass Line extends Time {\n\n}\n\nclass SelectStars extends Stage {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.init = false;\n\n\t\tthis._gridSize = 10;\n\t\tthis._starCount = 50;\n\t\tthis._range = 10; // 边长\n\n\t\tthis.stars;\n\n\t}\n\tinit() {\n\t\tthis._build();\n\t}\n\n\t_build() {\n\t\tvar startCrood;\n\t\tvar isValidCrood = false;\n\n\t\twhile(this.stars.length < this._starCount) {\n\n\t\t\tstartCrood = new THREE.Vector3(\n\t\t\t\tthis._range * this._gridSize * Math.random(), \n\t\t\t\tthis._range * this._gridSize * Math.random(), \n\t\t\t\tthis._range * this._gridSize * Math.random()\n\t\t\t);\n\n\t\t\tisValidCrood = this.stars.every(function(star) {\n\t\t\t\treturn (new THREE.Vector3).subVectors(startCrood, star.mesh.position).length() > this._gridSize * 2;\n\t\t\t});\n\n\t\t\tif (isValidCrood) {\n\t\t\t\tthis.stars.push(new Star());\n\t\t\t}\n\n\t\t\t\n\t\t}\n\n\n\t}\n}\n\nexport default SelectStars;\n\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/stages/select-stars.js\n **/"],"sourceRoot":""}