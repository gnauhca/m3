{"version":3,"sources":["webpack:///webpack/bootstrap 9c32838bc79c8336ccd5","webpack:///./js/main.js","webpack:///./js/view/view-manager.js","webpack:///./js/view/progress.js","webpack:///./js/view/view.js","webpack:///./js/common/time.js","webpack:///./js/view/select.js","webpack:///./js/stages/select-table.js","webpack:///./js/stages/stage.js","webpack:///./js/config/select-conf.js","webpack:///./assets/logo.png","webpack:///./assets/select/particle-map.png","webpack:///./js/stages/select-cube.js","webpack:///./js/stages/select-stars.js","webpack:///./js/stages/explode-particles.js","webpack:///./js/view/display.js","webpack:///./js/stages/display-mobile.js","webpack:///./js/stages/mobile.js","webpack:///./js/common/loader.js","webpack:///./js/config/mobile-conf.js","webpack:///./assets/mobiles/pro5/pro5.js","webpack:///./assets/mobiles/pro5/pro5uv.png","webpack:///./js/common/m3-trackballcontrol.js","webpack:///./css/common.scss"],"names":["require","window","M3","viewManager","appInit","TIME","start","renderer","THREE","WebGLRenderer","antialias","alpha","scene","Scene","document","body","appendChild","domElement","setClearColor","winWidth","innerWidth","winHeight","innerHeight","setSize","camera","PerspectiveCamera","m3Time","tick","addTick","render","addEventListener","aspect","updateProjectionMatrix","fog","Fog","size","step","spotLight","SpotLight","intensity","position","set","lookAt","Vector3","add","axisHelper","AxisHelper","gridHelperZ","GridHelper","rotation","x","Math","PI","activateView","_viewConstructors","_views","ViewManager","init","fontSize","htmlElem","querySelector","resize","style","name","active","stages","forEach","stage","data","view","getView","activate","inactivate","views","ProgressView","_$progressWrap","_$progressVal","_$water","_$waterDivs","querySelectorAll","setProgress","display","setTimeout","bind","percent","initColor","finalColor","opacity","currentColor","map","colorVal","i","$waterDiv","backgroundColor","join","innerHTML","transform","toFixed","View","removeView","bodys","delta","stop","addBody","timeBody","push","removeBody","index","indexOf","splice","now","Date","getTime","last","handleFrame","requestAnimationFrame","isStop","ticks","fn","TWEEN","update","Time","tweens","tween","threeObj","target","dur","tweenObj","that","dest","attrs","separater","setInit","key","keyArr","split","subObj","subKey","pos","destKey","initLookAt","THREEUtil","getLookAt","lookAtKey","test","Color","cKey","Tween","to","easing","Easing","Cubic","InOut","onUpdate","current","currentKey","pop","lookAt_x","lookAt_y","lookAt_z","call","onComplete","completeRemove","removeTween","SelectView","_selectStarsStage","_products","products","isInit","then","entry","SelectTable","objects","_BASECROOD","_CAMERACROOD","_t","_controls","_glowMaterial","GlowMaterial","_buildBase","_buildProductLogo","Object","keys","o","copy","TrackballControls","staticMoving","addTHREEObjTween","glowSvgMesh","material","uniforms_p_value","uniforms_glowColor_value","glowTable","tableGlow","uniforms","p","value","tableGlowTween","glowMesh","traverse","object","ShaderMaterial","viewVector","subVectors","gui","dat","GUI","parameters","c","cGUI","min","max","listen","onChange","setPandC","pGUI","productNames","_product","removeTick","svgString","options","shape","transformSVGPathExposed","defaultOptions","amount","bevelThickness","bevelSize","bevelSegments","bevelEnabled","curveSegments","steps","svgGemo","$","extend","ExtrudeGeometry","center","tableTopGemo","CylinderGeometry","tableTopMaterial","MeshPhongMaterial","color","transparent","refractionRatio","shininess","specular","tableTop","Mesh","tableBottomGemo","tableBottomMaterial","MeshLambertMaterial","DoubleSide","tableBottom","tableGlowMaterial","tableGlowGemo","logo","_createSVGGemo","computeBoundingBox","translate","boundingBox","y","rotateX","svgMaterial","metal","wireframe","svgMesh","svgLogo","glowMaterial","clone","scale","multiplyScalar","planeGridCount","gridWidth","planeWidth","planeHeight","phaneGeom","PlaneGeometry","side","plane","gridGroup","Group","gridMaterial","gridMesh","j","userData","crood","cubeGridCount","cubeWidth","directionalLightColor","directionalLight","DirectionalLight","castShadow","shadowCameraNear","shadowCameraFar","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","distance","shadowMapHeight","shadowMapWidth","spotLight2","logoMaterial","group","len","length","angelStep","Radius","z","svgOption","product","gemo","mesh","cos","sin","Stage","state","onProgress","onSuccess","remove","buildPath","selectConf","logoImg","particleMap","mx6","productName","SelectCube","_PLANEWIDTH","_PLANEHEIGHT","_CUBESIZE","_GRIDXCOUNT","_GRIDZCOUNT","_CUBEHEIGHT","_MINSCALE","_MAXSCALE","_cubes","build","emptySpace","cubeGroup","cubeMaterial","cubeGeom","cube","glowCube","random","scaleV","scaleMin","scaleMax","cubeSize","BoxGeometry","glowCubeGeom","modifier","SubdivisionModifier","modify","_moveCubes","abs","_moveCube","Star","initCrood","startLines","endLines","connectStars","autoMoveTween","t","SphereGeometry","TetrahedronGeometry","material1","MeshBasicMaterial","material2","CustomMaterial","glass","mulMaterial","MultiMaterial","SceneUtils","createMultiMaterialObject","line","setStart","setEnd","move","newCrood","moveTo","callback","setCrood","ProductStar","SVGGemetry","initV","finalV","normalize","axis","crossVectors","angle","acos","dot","quaternion","Quaternion","setFromAxisAngle","setFromQuaternion","Line","croodStart","croodEnd","end","Geometry","vertices","visible","delay","movePoint","staticPoint","geometry","verticesNeedUpdate","needUpdate","animate","SelectStars","_gridSize","_starCount","_rangeX","_rangeY","_rangeZ","_minDistant","_maxConnectDistant","_stars","_lines","explodeParticle","_build","starCroods","starCrood","isValidCrood","starGroup","toBaseVec","parseInt","hasConnect","distantVec","distant","every","productIndexes","Set","productCfgIndex","star","has","setScalar","lineGroup","iStar","jStar","Promise","resolve","particleSystem","catch","console","error","e","stack","lightUp","rotation_x","explode","connect","travel","ExplodeParticles","initPos","finalPos","loaded","Image","src","onload","TextureLoader","load","texture","imgData","getImageData","zRandom","yOffset","geom","PointsMaterial","sizeAttenuation","blending","AdditiveBlending","pixel","v3","lightupZ","exAngle","exAngleY","rPercent","ParticleSystem","cameraTween","up","particleTween","addTween","maxR","maxA","gatherDur","explodeDur","cameraDur","gatherTween","explodeTween","r","a","setLength","Out","planeR","needsUpdate","Display","_lockTick","_progressView","_mobileStages","_currentMobileStages","_$domWrap","_$domManager","_$windowWrap","_windowDoms","_currentWindowDoms","mobiles","mobileStage","_isLoad","sizePos","calculateSubWindowSize","entryCount","all","meshPos","_createWindowUI","_resizeWindows","removeClass","sphereTick","addClass","activeWindows","activeWindow","inActivate","$lockBtn","find","$unlockBtn","$backBtn","on","_lock","_unlock","parents","resetWindow","_closeWindow","changeColor","silbings","unloadedCount","loadingInfos","loading","totalSize","loadedSize","progress","loadingInfo","_showProgress","_name","windowTemplate","colorTemplate","colorHTML","html","append","getColors","replace","empty","reset","resizeWindow","item","$windowDom","css","lock","sizeInfo","getSize","unlock","DisplayMobile","mobileName","_windowSize","_winSizePX","_camera","_mobile","trackball","objectSizes","model","locked","reject","_setupScene","log","windowSize","_changeColor","_render","_playEntryAnimation","$domElem","removeWindow","handleResize","initSize","finalSize","setState","resizeTween","enabled","modelRotation","cameraRotation","cameraUp","eye","addVectors","isMain","fullScreen","initModelRotation","initCameraPosition","initCameraLookAtPosition","setViewport","setScissor","setScissorTest","loader","mobileEnvMap","JSONLoader","Mobile","config","_materials","_colors","_currentColor","_uuidMaterialNameMap","_texturePath","mobile","calculateSize","children","child","materialName","uuid","models","materials","loadPromise","modelRes","JSON","parse","_JSONLoaderParse","modelName","mParse","match","json","mapDiffuse","location","pathname","loadedCache","Loader","loadParams","loadTasks","_getLoadTasks","onLoad","loadTask","getLoadedSize","_loadTask","url","loadMethod","type","res","_getResults","ext","typeExtMap","_params","urlRegx","sizeDefault","params","urls","prototype","toString","param","concat","_getLoaderType","imgLoader","ImageLoader","xhr","total","xhrLoader","XHRLoader","str","req","XMLHttpRequest","lengthComputable","event","s","createElement","responseText","documentElement","open","send","_this","STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM_PAN","screen","left","top","width","height","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","noRoll","dynamicDampingFactor","minDistance","maxDistance","Infinity","targetMesh","target0","position0","up0","EPS","lastPosition","_state","_prevState","_eye","_rotation","_zoomStart","Vector2","_zoomEnd","_touchZoomDistanceStart","_touchZoomDistanceEnd","_panStart","_panEnd","changeEvent","startEvent","endEvent","initEvent","setFromEuler","changeTargetMesh","winSize","maxDisBase","minDisBase","handleEvent","getMouseOnScreen","vector","pageX","pageY","getMouseProjectionOnBall","offsetX","offsetY","radio","deltaRotationQuaternion","Euler","multiplyQuaternions","rotateTarget","zoomCamera","factor","panCamera","mouseChange","pan","sub","lengthSq","cross","checkDistances","distanceToSquared","dispatchEvent","mousePreX","mousePreY","isInScreen","mousedown","preventDefault","stopPropagation","button","mousemove","mouseup","removeEventListener","mousewheel","wheelDelta","detail","touchstart","touches","dx","dy","sqrt","touchmove","touchend","_rotateEnd","_rotateStart","module","exports"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9c32838bc79c8336ccd5\n **/","import ViewManager from './view/view-manager.js';\nimport Time from 'time.js';\nimport Loader from 'loader.js';\nrequire('../assets/mobiles/pro5/pro5.js');\n(function() { \nrequire('../css/common.scss');//return;\n\nwindow.M3 = {};\nM3.viewManager = new ViewManager();\n\n// todo: webgl 检查\n// ...\n\n\n/*var loader = new Loader();\nvar progressView = M3.viewManager.getView('progress');\nprogressView.activate();\nloader.load({url: './build/presets.js', size: 100}, function(percent) {\n\tprogressView.setProgress(percent);\n}).then(function() {\n\tprogressView.inactivate();\n\tappInit();\n});*/\n\nappInit();\n\nfunction appInit() {\n\twindow.TIME.start();\n\t// 基本场景\n\tM3.renderer = new THREE.WebGLRenderer({ antialias: true , alpha: true});\n\n\tM3.scene = new THREE.Scene();\n\tdocument.body.appendChild(M3.renderer.domElement);\n\tM3.renderer.setClearColor(0x2abced, 0);\n\n\tvar winWidth = window.innerWidth;\n\tvar winHeight = window.innerHeight;\n\n\tM3.renderer.setSize(winWidth, winHeight);\n\n\n\tM3.camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 5000);\n\n\t// main render tick\n\tvar m3Time = new Time();\n\n\tM3.tick = m3Time.addTick(function() {\n\t\tM3.renderer.render(M3.scene, M3.camera);\n\t});\n\n\n\twindow.addEventListener('resize', function() {\n\t\twinWidth = window.innerWidth;\n\t\twinHeight = window.innerHeight;\n\t\tM3.camera.aspect = winWidth / winHeight;\n\t\tM3.camera.updateProjectionMatrix();\n\t\tM3.renderer.setSize(winWidth, winHeight);\n\t});\n\n\n\n\n\t/* fog */\n\tvar fog = new THREE.Fog(0x000000, 0, 2000);\n\t// M3.scene.fog = fog;\n\n\tvar size = 400;\n\tvar step = 10;\n\n \tvar spotLight = new THREE.SpotLight(0xffffff);\n \tspotLight.intensity = 0.8;\n \tspotLight.position.set(-300, 500, 200);\n \tspotLight.lookAt(new THREE.Vector3); \n\tM3.scene.add(spotLight);\n\n\t/* helper */\n\tvar axisHelper = new THREE.AxisHelper( 100 );\n\tM3.scene.add( axisHelper );\n\t/* grid helper */\n\t// var gridHelperX = new THREE.GridHelper( size, step, 0xff0000 );\n\t// gridHelperX.rotation.z = Math.PI / 2;\n\t// M3.scene.add( gridHelperX );\n\n\t// var gridHelperY = new THREE.GridHelper( size, step, 0x00ff00 );\n\t// M3.scene.add( gridHelperY );\n\n\tvar gridHelperZ = new THREE.GridHelper( size, step, 0x0000ff );\n\tgridHelperZ.rotation.x = Math.PI / 2;\n\tM3.scene.add( gridHelperZ );\n\n\n\n\t// M3.viewManager.activateView('index');\n\t// M3.viewManager.activateView('display', {mobiles: ['pro5', 'pro6'/*, 'mx5', 'mx6'*/]});\n\tM3.viewManager.activateView('select');\t\n}\n\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/main.js\n **/","import Progress from './progress.js';\n// import Index from './index.js';\nimport Select from './select.js';\nimport Display from './display.js';\nvar _viewConstructors = {\n    'progress': Progress,\n    // 'index': Index,\n    'select': Select,\n    'display': Display,\n};\n\nvar _views = {};\n\n\nclass ViewManager {\n\n\tconstructor() {\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\t// 所有 view 及其管理的 stages 相应窗口变化\n\t\twindow.addEventListener('resize', (function() {\n\t\t    var winWidth;\n\t\t    var fontSize;\n\t\t    var htmlElem = document.querySelector('html');\n\t\t    function resize() {\n\t\t        winWidth = window.innerWidth;\n\t\t        fontSize = winWidth / 100;\n\t\t        fontSize = fontSize > 10 ? 10 : (fontSize < 5 ? 5 : fontSize);\n\t\t        htmlElem.style.fontSize = fontSize + 'px';\n\n\t\t        for (let name in _views) {\n\t\t        \tif (_views[name].active) { \n\t\t\t            _views[name].resize();\n\t\t\t            _views[name].stages && _views[name].stages.forEach(function(stage) {\n\t\t\t            \tstage.resize && stage.resize();\n\t\t\t            });\t\t        \t\t\n\t\t        \t}\n\n\t\t        }\n\t\t    }\n\t\t    resize();\n\t\t    return resize;\n\t\t})());\t\t\n\t}\n\n    activateView(name, data) {\n        var view = this.getView(name);\n        view.activate(data);\n    }\n\n    inactivateView(name, data) {\n        var view = this.getView(name);\n        view.inactivate(data);\n    }\n\n    getView(name) {\n        if (!_views[name]) {\n            _views[name] = new _viewConstructors[name](this);\n        }\n        return _views[name];\n    }\n\n    removeView(view) {\n    \tdelete views[view.name];\n    }\n\n}\n\nexport default ViewManager;\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/view/view-manager.js\n **/","import View from './view.js';\n\nclass ProgressView extends View {\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._$progressWrap = document.querySelector('#progressView');\n\t\tthis._$progressVal = document.querySelector('#progressVal');\n\t\tthis._$water = document.querySelector('.water');\n\t\tthis._$waterDivs = this._$water.querySelectorAll('div');\n\t\tthis.setProgress(0);\n\t}\n\n\tactivate() { \n\t\tthis._$progressWrap.style.display = 'block';\n\t}\n\n\tinactivate() {\n\t\tsetTimeout(function() {\n\t\t\tthis._$progressWrap.style.display = 'none';\n\t\t}.bind(this), 1000);\n\t}\n\n\tsetProgress(percent) {\n\t\tvar initColor = [246, 11, 55];\n\t\tvar finalColor = [16, 121, 125];\n\t\tvar opacity = 0.3;\n\t\tvar currentColor;\n\n\t\tcurrentColor = finalColor.map(function(colorVal, i) {\n\t\t\treturn initColor[i] + (colorVal - initColor[i]) * percent|0;\n\t\t});\n\n\t\tthis._$waterDivs.forEach(function($waterDiv) {\n\t\t\t$waterDiv.style.backgroundColor = 'rgba(' + currentColor.join(',') + ',' + opacity + ')';\n\t\t});\n\n\t\tthis._$progressVal.innerHTML = (percent*100 | 0) + '%';\n\t\tpercent *= 0.999;\n\t\tthis._$water.style.transform = 'scaleY(' + percent.toFixed(2) + ')';\n\t}\n}\n\nexport default ProgressView;\n\n\n/** WEBPACK FOOTER **\n ** ./js/view/progress.js\n **/","import Time from 'time.js';\n\nclass View extends Time {\n\n    constructor(viewManager) {\n        super();\n        this.viewManager = viewManager;\n        this.stages = []; // 3d 对象\n        this.active = false;\n    }\n\n    // 激活视图，data 为接受的参数\n    activate(data) {\n\n    }\n\n    // 冻结视图，data 为接受的参数\n    inactivate(data) {}\n\n    addStage(stage) {\n\n    }\n\n    // 窗口大小变化的操作\n    resize() {}\n\n    distroy() {\n        super.distroy();\n        this.viewManager.removeView(this);\n    }\n\n}\n\nexport default View;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/view/view.js\n **/","/* 时间 */\nvar TIME = {\n\n\t// 所有时间body对象\n\tbodys : [],\n\tdelta: 16\n}\n\nvar stop = false;\nTIME.addBody = function(timeBody) {\n\tthis.bodys.push(timeBody);\n}\n\nTIME.removeBody = function(timeBody) {\n\tvar index = this.bodys.indexOf(timeBody);\n\n\tif (index !== -1) {\n\t\tthis.bodys.splice(index, 1);\n\t}\n}\nTIME.tick = (function() {\n\tvar now = (new Date()).getTime();\n\tvar last = now;\n\tvar delta;\n\treturn function() {\n\t\tdelta = now - last;\n\t\tdelta = delta > 500 ? 30 : (delta < 16? 16 : delta);\n\t\tTIME.delta = delta;\n\t\tlast = now;\n\n\t\tTIME.handleFrame(delta);\n\t\tif (!stop) {\n\t\t\trequestAnimationFrame(TIME.tick);\n\t\t\t// setTimeout(TIME.tick, 1000);\n\t\t}\t\t\n\t}\t\n})();\n\n\nTIME.start = function() {\n\tstop = false;\n\tthis.tick();\n}\n\nTIME.stop = function() {\n\tstop = true;\n}\n\nTIME.handleFrame = function(delta) { \n\n\tTIME.bodys.forEach(function(body) {\n\t\tif (!body.isStop) {\n\t\t\tbody.ticks.forEach(function(tick) {\n\t\t\t\ttick.fn && tick.fn(delta); \n\t\t\t});\n\t\t}\n\t});\n\n\tTWEEN.update();\n}\n\nwindow.TIME = TIME;\n\n/* 时间物体类，提供两个时机，帧更新，固定间隔更新，每一个有时间概念的物体，就继承 */\nclass Time {\n\n\tconstructor() {\n\t\tTIME.addBody(this);\n\t\tthis.ticks = [];\n\t\tthis.tweens = [];\n\t\tthis.isStop = false;\n\t}\n\n\n\t/**\n\t * 该物体灭亡\n\t */\n\tdestory() {\n\t\tTIME.removeBody(this);\n\t}\n\n\t/** \n\t * 帧更新\n\t * @param timegap 与上一帧的时间间隔\n\t */\n\taddTick(fn) {\n\t\tvar tick = {'fn': fn.bind(this)};\n\n\t\ttick.isStop = false;\n\t\tthis.ticks.push(tick);\n\t\treturn tick;\n\t}\n\n\tremoveTick(tick) {\n\t\tif (!tick) {\n\t\t\t// remove all\n\t\t\tthis.ticks = [];\n\t\t\treturn;\n\t\t}\n\n\t\tvar index = this.ticks.indexOf(tick);\n\n\t\tif (index !== -1) {\n\t\t\tthis.ticks.splice(index, 1);\n\t\t}\n\t}\n\n\t/** \n\t * tween\n\t */\n\taddTween(tween) {\n\t\tthis.tweens.push(tween);\n\t}\n\n\t/*\n\t * tweenObj\n\t */\n\taddTHREEObjTween(threeObj, target, dur, tweenObj) {\t\t\n\t\tvar that = this;\n\t\tvar init = {};\n\t\tvar dest = {};\n\t    \n\t    var attrs = ['x', 'y', 'z', 'r', 'g', 'b', 'opacity'];\n\t\tvar separater = '_';\n\n\t\tfunction setInit(key) {\n\t\t\tlet keyArr = key.split('_');\n\t\t\tlet subObj = threeObj;\n\n\t\t\tkeyArr.forEach(function(subKey) { subObj = subObj[subKey]; });\n\t\t\tinit[key] = subObj;\n\t\t}\n\n\t\tif (threeObj instanceof THREE.Vector3 && target instanceof THREE.Vector3) {\n\t\t\t// 向量\n\t\t\t['x', 'y', 'z'].forEach(function(pos) {\n\t\t\t\tinit[pos] = threeObj[pos];\n\t\t\t\tdest[pos] = target[pos];\n\t\t\t});\n\t\t} else {\n\t\t\t// object3d or material\n\t\t\tfor (let key in target) {\n\t\t\t\tlet destKey = key;\n\n\t\t\t\tif (key === 'lookAt') {\n\t\t\t\t\tlet initLookAt = THREE.THREEUtil.getLookAt(threeObj);\n\t\t\t\t\t['x','y','z'].forEach(function(lookAtKey) {\n\t\t\t\t\t\tinit['lookAt_' + lookAtKey] = initLookAt[lookAtKey];\n\t\t\t\t\t\tdest['lookAt_' + lookAtKey] = target['lookAt'][lookAtKey];\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (/color/i.test(key) > 0 && !(target[key] instanceof THREE.Color)) {\n\t\t\t\t\t\ttarget[key] = new THREE.Color(target[key]);\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof target[key] === 'object') {\n\t\t\t\t\t\tfor (let cKey in target[key]) {\n\t\t\t\t\t\t\tdestKey = key;\n\t\t\t\t\t\t\tif (attrs.indexOf(cKey) !== -1) {\n\t\t\t\t\t\t\t\tdestKey += '_' + cKey;\n\t\t\t\t\t\t\t\tdest[destKey] = target[key][cKey];\n\t\t\t\t\t\t\t\tsetInit(destKey);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdest[destKey] = target[key];\n\t\t\t\t\t\tsetInit(destKey);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\n\n\t\t// console.log(init,dest);\n\t\tvar tween;\n\t\ttweenObj = tweenObj || {};\n\t\ttween = new TWEEN.Tween(init)\n\t\ttween.to(dest, dur)\n\t\t\t.easing(tweenObj.easing || TWEEN.Easing.Cubic.InOut)\n\t\t\t.onUpdate(function() {\n\t\t\t\tlet current = this;\n\t\t\t\tfor (let currentKey in current) {\n\t\t\t\t\tif (currentKey.indexOf('lookAt') === -1) {\n\t\t\t\t\t\tlet keyArr = currentKey.split('_');\n\t\t\t\t\t\tlet last = keyArr.pop();\n\t\t\t\t\t\tlet subObj = threeObj;\n\t\t\t\t\t\tkeyArr.forEach(function(key) { subObj = subObj[key]; });\n\t\t\t\t\t\tsubObj[last] = current[currentKey];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (current.lookAt_x) {\n\t\t\t\t\tthreeObj.lookAt(\n\t\t\t\t\t\tnew THREE.Vector3(current.lookAt_x, current.lookAt_y, current.lookAt_z)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\ttweenObj.onUpdate && tweenObj.onUpdate.call(this);\n\t\t\t})\n\t\t\t.onComplete(function() {\n\t\t\t\tvar completeRemove = true;\n\t\t\t\tif (tweenObj.onComplete) {\n\t\t\t\t\tif (tweenObj.onComplete() === false)\n\t\t\t\t\tcompleteRemove = false;\n\t\t\t\t}\n\n\t\t\t\tcompleteRemove && that.removeTween(tween);\n\t\t\t});\n\n\t\tthis.tweens.push(tween);\n\t\treturn tween;\n\t}\n\n\tremoveTween(tween) {\n\t\tif (!tween) {\n\t\t\t// remove all\n\t\t\tthis.tween = [];\n\t\t\treturn;\n\t\t}\n\n\t\tvar index = this.tweens.indexOf(tween);\n\n\t\tif (index !== -1) {\n\t\t\t//tween.stop();\n\t\t\tthis.tweens.splice(index, 1);\n\t\t}\n\t}\n\n\t// stop 暂停时间\n\tstop() {\n\t\tthis.isStop = true;\n\t\tthis.tweens.forEach(function(tween) {\n\t\t\ttween.stop();\n\t\t});\n\t}\n\n\tstart() {\n\t\tthis.isStop = false;\n\t\tthis.tweens.forEach(function(tween) {\n\t\t\ttween.start();\n\t\t});\n\t}\n}\n\nwindow.Time = Time;\n\nexport default Time;\n\n\n\n\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/common/time.js\n **/","import View from './view.js';\nimport SelectTable from '../stages/select-table.js';\nimport SelectCube from '../stages/select-cube.js';\nimport SelectStars from '../stages/select-stars.js';\nimport selectCfg from 'select-conf.js';\n\n\nclass SelectView extends View {\n\n\tconstructor() {\n\t\tsuper();\n\t\t// this._selectTable = new SelectTable();\n\t\t// this._selectCubeStage = new SelectCube();\n\t\t\n\t\tthis._selectStarsStage = new SelectStars();\n\n\t\tthis._products = selectCfg.products;\n\t\tthis.init();\n\t\t\n\t\t// this.stages.push(this._selectTable); // super\n\t}\n\n\tinit() {\n\n\t}\n\n\tactivate() { \n\t\t// stage init\n\t\t// if (!this._selectTable.isInit) {\n\t\t// \tthis._selectTable.init();\n\t\t// }\n\t\t// this._selectTable.entry()\n\n\t\t// if (!this._selectCubeStage.isInit) {\n\t\t// \tthis._selectCubeStage.init();\n\t\t// }\n\t\t// this._selectCubeStage.entry()\n\n\n\t\tif (!this._selectStarsStage.isInit) {\n\t\t\tthis._selectStarsStage.init().then(()=>this._selectStarsStage.entry());\n\t\t\t\n\t\t}\n\n\t\t// select animation\n\t\t\n\t}\n\n\tinactivate() { }\n}\n\nexport default SelectView;\n\n\n/** WEBPACK FOOTER **\n ** ./js/view/select.js\n **/","import Stage from './stage.js';\nimport selectCfg from 'select-conf.js';\n\n// Dependencies CONFIG.selects\nclass SelectTable extends Stage {\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.isInit = false;\n\t\tthis.objects;\n\n\t\tthis._BASECROOD = new THREE.Vector3(0, 0, 0);\n\t\tthis._CAMERACROOD = new THREE.Vector3(0, 100, 400);\n\n\t\tthis._products = {}; // {'pro5': {mesh: xx, glowMesh, selected: false}}\n\n\t\tthis._t;\n\t\tthis._controls;\n\n\t\t// shader\n\t\tthis._glowMaterial;\n\t}\n\n\t// this.objects\n\tinit() {\n\t\tthis._glowMaterial = new THREE.GlowMaterial();\n\n\t\tthis._buildBase();\n\t\tthis._buildProductLogo(); //set products\n\n\n\n        this.isInit = true;\n\t}\n\n\tentry() {\n\n\t\tObject.keys(this.objects).forEach(function(o) { M3.scene.add(this.objects[o]);}.bind(this));\n\n\t\tthis.camera.position.copy(this._CAMERACROOD);\n\t\tthis.camera.lookAt(this._BASECROOD);\n\t\tthis._controls = new THREE.TrackballControls(this.camera, M3.renderer.domElement);\n\t\tthis._controls.staticMoving = true;\n\n\n\t\t// this.addTHREEObjTween(mesh.material, {color: new THREE.Color(0x0cbbef), emissive: new THREE.Color(0xcccccc)}, 3000).start();\n\n\t\tthis.addTHREEObjTween(this.objects.glowSvgMesh.material, {\n\t\t\tuniforms_p_value: 0.05,\n\t\t\tuniforms_glowColor_value: 0xffffff\n\t\t}, 4000).start();\n\n\n\n\t\tvar glowTable = function() {\n\t\t\tvar uniforms_p_value = this.objects.tableGlow.material.uniforms.p.value === 1.5 ? 5.7 : 1.5;\n\t\t\tlet tableGlowTween = this.addTHREEObjTween(this.objects.tableGlow.material, {\n\t\t\t\tuniforms_p_value: uniforms_p_value,\n\t\t\t}, 4000, {\n\t\t\t\tonComplete() { glowTable()}\n\t\t\t}).start();\t\t\t\n\t\t}.bind(this);\n\n\t\tglowTable();\n\n\t\t// glow vertor\n\t\tthis._t = this.addTick(function(delta) {\n\t\t\tthis._controls.update(delta);\n\t\t\t\n\t\t\tlet glowMesh;\n\n\t\t\tM3.scene.traverse(function(object) {\n\t\t\t\tif (object.material && object.material instanceof THREE.ShaderMaterial) {\n\t\t\t\t\tobject.material.uniforms.viewVector.value = \n\t\t\t\t\tnew THREE.Vector3().subVectors(this.camera.position, object.position);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t});\n\n\t\t// shader test \n\t\tvar gui = new dat.GUI();\n\t\tvar parameters = { c: 0.5, p: 4.0 };\n\t\tvar cGUI = gui.add( parameters, 'c' ).min(0.0).max(1.0).step(0.01).name(\"c\").listen();\n\t\tcGUI.onChange(\n\t\t    function(value) { \n\t\t\t\tsetPandC(parameters.p, parameters.c); \n\t\t    }\n\t\t);\n\n\t\tvar pGUI = gui.add(parameters, 'p').min(0.0).max(6.0).step(0.01).name(\"p\").listen();\n\t\tpGUI.onChange(\n\t\t    function(value) { \n\t\t\t\tsetPandC(parameters.p, parameters.c);\n\t\t    }\n\t\t);\n\n\t\tfunction setPandC(p, c) {\n\t\t\tM3.scene.traverse(function(object) {\n\t\t\t\tif (object.material && object.material instanceof THREE.ShaderMaterial) {\n\t\t\t\t\tobject.material.uniforms[\"p\"].value = p; \n\t\t\t\t\tobject.material.uniforms[\"c\"].value = c; \n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tselectProduct(productNames) {\n\t\tthis._products.forEach(function(_product) {\n\n\t\t});\n\t}\n\n\tleave() {\n\t\t// or return a promise so that can do some ani\n\t\tthis.removeTick(); \n\t}\n\n\t_createSVGGemo(svgString, options) {\n\t\tvar shape = transformSVGPathExposed(svgString);\n\t\tvar defaultOptions = {\n            amount: 5,\n            bevelThickness: 0,\n            bevelSize: 0,\n            bevelSegments: 12,\n            bevelEnabled: false,\n            curveSegments: 80,\n            steps: 1\n        };\n        var svgGemo;\n\n        options = $.extend({}, defaultOptions, options);\n\t\tsvgGemo = new THREE.ExtrudeGeometry(shape, options)\n        svgGemo.center();\t\n        return svgGemo;\n\t}\n\n\t_buildBase() {\n\n\t\t// TABLE 2m width\n\t\tvar tableTopGemo = new THREE.CylinderGeometry(100, 100, 3, 100);\n\t\tvar tableTopMaterial = new THREE.MeshPhongMaterial({color: 0xaaaaff});\n\n\t\ttableTopMaterial.transparent = true;\n\t\ttableTopMaterial.opacity = 0.3;\n\t\ttableTopMaterial.refractionRatio = 1.3;\n\t\t// tableTopMaterial.reflectivity = 1;\n\t\ttableTopMaterial.shininess = 37.46;\n\t\ttableTopMaterial.specular = new THREE.Color(\"rgb(0.54, 0.54, 0.54)\");\n\n\t\tvar tableTop = new THREE.Mesh(tableTopGemo, tableTopMaterial);\n\t\ttableTop.position.set(0, 33, 0);\n\n\n\t\tvar tableBottomGemo = new THREE.CylinderGeometry(100, 90, 30, 100, 10);\n\t\tvar tableBottomMaterial = new THREE.MeshLambertMaterial({color: 0x3a5c67,'side': THREE.DoubleSide, 'emissive': 0x888888}); \n\t\tvar tableBottom = new THREE.Mesh(tableBottomGemo, tableBottomMaterial);\n\t\ttableBottom.position.set(0, 15, 0);\n\n\t\tthis.objects.tableTop = tableTop;\n\t\tthis.objects.tableBottom = tableBottom;\n\n\t\tvar tableGlowMaterial = new THREE.GlowMaterial({c: 0.12, p: 6, color: new THREE.Color(0x0cbbef)});\n\t\tvar tableGlowGemo = new THREE.CylinderGeometry(100, 99.5, 2, 100, 10);\n\t\tvar tableGlow = new THREE.Mesh(tableGlowGemo, tableGlowMaterial);\n\t\ttableGlow.position.set(0, 31, 0);\n\n\t\tthis.objects.tableTop = tableTop;\n\t\tthis.objects.tableBottom = tableBottom;\n\t\tthis.objects.tableGlow = tableGlow;\n\n\t\t// MEIZU LOGO\n\t\tvar svgString = selectCfg.logo;\n\t\tvar options = {\n            amount: 5,\n            bevelThickness: 0.5,\n            bevelSize: 0.5,\n            bevelSegments: 12,\n            bevelEnabled: true,\n            curveSegments: 80,\n            steps: 1\n        };\n        var svgGemo = this._createSVGGemo(svgString, options);\n        svgGemo.computeBoundingBox()\n        svgGemo.translate(0, -svgGemo.boundingBox.max.y, 0);\n        svgGemo.rotateX(Math.PI);\n\n        var svgMaterial = new THREE.MeshPhongMaterial({color: 0x0cbbef, shininess: 100, metal: true, wireframe: true});\n        var svgMesh = new THREE.Mesh(svgGemo, svgMaterial);\n        svgMesh.position.set(0, 0, 150);\n        this.objects.svgLogo = svgMesh;\n\n\n        var glowMaterial = new THREE.GlowMaterial({c: 0.12, p: 5, color: 0x0cbbef});\n        var glowSvgMesh = new THREE.Mesh(svgGemo.clone(), glowMaterial);\n\t\tglowSvgMesh.position.copy(svgMesh.position);\n\t\tglowSvgMesh.scale.multiplyScalar(1.1);\n\t\t// this.objects.glowSvgMesh = glowSvgMesh;\n\n\t\t// PLANE & GRID & cube\n\t\t\n\t\t// PLANE \n\t\tvar planeGridCount = 30;\n\t\tvar gridWidth = 100;\n\t\tvar planeWidth = planeGridCount * gridWidth;\n\t\tvar planeHeight = planeGridCount * gridWidth;\n\t\tvar phaneGeom = new THREE.PlaneGeometry(planeWidth, planeHeight, planeGridCount, planeGridCount);\n\t\tvar material = new THREE.MeshPhongMaterial( {color: 0x3a5c67, side: THREE.DoubleSide} );\n\t\t// var material = new THREE.MeshBasicMaterial( {color: 0x333333, side: THREE.DoubleSide} );\n\t\tvar plane = new THREE.Mesh( phaneGeom, material );\n\t\tplane.rotation.x = Math.PI * 0.5;\n\t\tplane.position.y -= 1;\n\t\tthis.objects.plane = plane;\n\n\n\t\t// GRID \n\t\tvar gridGroup = new THREE.Group();\n\t\tvar gridMaterial = new THREE.MeshPhongMaterial({color: 0xdddddd, side: THREE.DoubleSide});\n\t\tvar gridMaterial = this._glowMaterial.clone();\n\t\tvar gridMesh;\n\n\n\t\tfor (let i = 0; i < planeGridCount; i++) {\n\t\t\tfor (let j = 0; j < planeGridCount; j++) {\n\t\t\t\tif ( (i % 2 && !(j % 2)) || (!(i % 2) && j % 2) ) {\n\t\t\t\t\tgridMesh = new THREE.Mesh(\n\t\t\t\t\t\tnew THREE.PlaneGeometry(gridWidth, gridWidth, 1, 1), \n\t\t\t\t\t\tgridMaterial\n\t\t\t\t\t);\n\t\t\t\t\tgridMesh.userData.crood = {x: i, y: j};\n\t\t\t\t\tgridMesh.rotation.x = -Math.PI * 0.5;\n\t\t\t\t\tgridMesh.position.set(i * gridWidth - planeWidth/2, 0.1, j * gridWidth - planeHeight/2);\n\t\t\t\t\tgridGroup.add(gridMesh);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.objects.gridGroup = gridGroup;\n\n\n\t\t// CUBE corner\n\t\tvar cubeGridCount = 35;\n\t\tvar cubeWidth = planeWidth / cubeGridCount;\n\n\n\n\t\t// light\n        var directionalLightColor = \"#ffffff\";\n        var directionalLight = new THREE.DirectionalLight(directionalLightColor);\n        directionalLight.name = this.name + ' directionalLight';\n        directionalLight.position.set(-100, 50, 50);\n        directionalLight.castShadow = true;\n        directionalLight.shadowCameraNear = 0;\n        directionalLight.shadowCameraFar = 300;\n        directionalLight.shadowCameraLeft = -200;\n        directionalLight.shadowCameraRight = 200;\n        directionalLight.shadowCameraTop = 200;\n        directionalLight.shadowCameraBottom = -200;\n\n        directionalLight.distance = 0;\n        directionalLight.intensity = 0.5;\n        directionalLight.shadowMapHeight = 1024;\n        directionalLight.shadowMapWidth = 1024;\n        directionalLight.target.lookAt(this._BASECROOD); \n        // this.objects.directionalLight = directionalLight;\n\n \t\tthis.objects.spotLight = new THREE.SpotLight(0xffffff);\n \t\tthis.objects.spotLight.intensity = 0.8;\n \t\tthis.objects.spotLight.position.set(-300, 200, 100);\n \t\tthis.objects.spotLight.lookAt(this._BASECROOD); \n\n \t\tthis.objects.spotLight2 = new THREE.SpotLight(0xffffff);\n \t\tthis.objects.spotLight2.intensity = 0.5;\n \t\tthis.objects.spotLight2.position.set(100, 200, -100);\n \t\tthis.objects.spotLight2.lookAt(this._BASECROOD); \n\t}\n\n\t_buildProductLogo() {\n\t\tvar logoMaterial = new THREE.MeshPhongMaterial({color: 0x999999});\n\t\tvar group = new THREE.Group();\n\t\tvar len = selectCfg.products.length;\n\t\tvar angelStep = Math.PI * 2 / len;\n\t\tvar Radius = 90;\n\t\tvar y = 32;\n\t\tvar x;\n\t\tvar z;\n\n\t\tvar svgOption = {\n            amount: 1,\n            bevelThickness: 0.1,\n            bevelSize: 0.1,\n            bevelSegments: 12,\n            bevelEnabled: false,\n            curveSegments: 80,\n            steps: 1\n        };\n\n\t\tselectCfg.products.forEach(function(product, i) {\n\t\t\tvar gemo = this._createSVGGemo(product.svgString, svgOption);\n\t\t\tvar mesh = new THREE.Mesh(gemo, logoMaterial/*.clone()*/);\n\t\t\t\n\t\t\tvar glowMesh = new THREE.Mesh(gemo.clone(), this._glowMaterial.clone());\n\n\n\t\t\tx = Radius * Math.cos(angelStep * i);\n\t\t\tz = Radius * Math.sin(angelStep * i);\n\n\t\t\tthis._products[product.name] = {'mesh': mesh, 'glowMesh': glowMesh, 'selected':false};\n\n\t\t\tmesh.scale.set(0.15, 0.15, 0.15);\n\t\t\tmesh.position.set(x, y, z);\n\t\t\tmesh.rotation.x = Math.PI / 2;\n\t\t\tmesh.rotation.z = Math.PI / 2 + angelStep * i;\n\n\t\t\tglowMesh.scale.set(0.15, 0.15, 0.15).multiplyScalar(1.2);;\n\t\t\tglowMesh.position.set(x, y, z);\n\t\t\tglowMesh.rotation.x = Math.PI / 2;\n\t\t\tglowMesh.rotation.z = Math.PI / 2 + angelStep * i;\n\n\t\t\t// group.add(glowMesh);\n\t\t\tgroup.add(mesh);\n\t\t}.bind(this));\n\n\t\tthis.objects.products = group;\n\t}\n}\n\nexport default SelectTable;\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/stages/select-table.js\n **/","import Time from 'time.js';\n\nclass Stage extends Time {\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.objects = {};\n\t\tthis.state; // unload, loading, setup, animate\n\t\tthis.isInit = false;\n\t\tthis.scene;\n\n\t\t// 如果不使用默认的 M3 scene 重写constructor 设置新的scene\n\t\tthis.scene = M3.scene;\n\t\tthis.camera = M3.camera;\n\t}\n\n\t// 加载，接受 进度回调， 成功回调\n\tload(onProgress, onSuccess) {\n\n\t}\n\n\t// 装载 3d 对象\n\tinit(onProgress, onSuccess) {\n\t\t\n\t}\n\n\tresize() {\n\t\t\n\t}\n\n\t// 从 M3.scene 中移除\n\tremove() {\n\t\tfor (var name in this.objects) {\n\t\t\tthis.scene.remove(this.objects[name]);\n\t\t}\n\t}\n\n\tdestory() {\n\t\tsuper.destory(); // remove tick of time\n\t\tthis.remove();\n\t\tfor (var name in this.objects) {\n\t\t\tdelete this.objects[name];\n\t\t}\n\t}\n}\n\nexport default Stage;\n\n\n/** WEBPACK FOOTER **\n ** ./js/stages/stage.js\n **/","var buildPath = './build/'; \nvar products = ['pro6', 'pro5', 'mx5', 'mx6', 'meilan3s', 'meilan3', 'meilannote3'];\n\n\nvar selectConf = {\n\tlogo: 'M22.8,41H3c-1.7,0-3,1.4-3,3v15.1h3.6V45.2c0-0.7,0.5-1.2,1.2-1.2h6.3v15.2h3.6V44H21c0.7,0,1.2,0.5,1.2,1.2v13.9h3.5V44C25.8,42.4,24.4,41,22.8,41zM29.6,44v12.1c0,1.7,1.3,3,3,3H48v-2.9H34.3c-0.7,0-1.2-0.5-1.2-1.2v-3.4h14.1v-3H33.1v-3.4c0-0.7,0.5-1.2,1.2-1.2H48V41H32.6C30.9,41,29.6,42.4,29.6,44zM75.3,41H59.4v2.9h13.1L59.9,55.1c-2,1.7-0.7,4,1,4H77v-2.9H63.6L76.2,45C78.3,43.1,77,41,75.3,41zM96.5,41v13.9c0,0.7-0.5,1.2-1.2,1.2l0,0H85.1l0,0c-0.7,0-1.2-0.5-1.2-1.2V41h-3.5v15.1c0,1.7,1.3,3,3,3H97c1.7,0,3-1.3,3-3V41H96.5zM51.8 41L55.5 41L55.5 59.1L51.8 59.1z',\n\n\tproducts: [],\n\tlogoImg: buildPath + require(\"assets/logo.png\"),\n\tparticleMap: buildPath + require(\"assets/select/particle-map.png\")\n}\n\nvar mx6 = 'M0,66.5h1.9l0,0V37.9l15.4,28.6h1.9l15.2-28.6h0.3v28.6h1.9V34.8h-3L18.2,64L3,34.8H0V66.5zM41.4,34.8l12.9,14.1l1.6-1.4L43.6,34.8M73.1,34.8L60.2,48.9l-1.6-1.4l12.2-12.7H73.1zM41.4,66.5l12.9-14.1l1.6,1.4L43.6,66.5M73.1,66.5L60.2,52.4l-1.6,1.4l12.2,12.7H73.1zM88.7,66.5c-4.1,0-6.9-1.1-8.5-3.3c-1.4-2-2-4.8-2-9.2c0-8,1-12.4,3.3-15.1c2.5-2.8,6.7-4,14-4c0.2,0,0.5,0,1.8,0l0,0l0.1,1.3l-1.7,0c-7.8,0.2-15.1,0.4-15.7,11.7l0,0.6l0.7-0.1c2.7-0.3,6.4-0.7,8.8-0.7c6.5,0,10.5,1.5,10.5,9.2c0,3.7-1,6.2-3,7.6C95.2,65.8,92.6,66.5,88.7,66.5z M80,50.3c-0.1,1.8-0.1,3-0.1,4.3c0,5.2,1,10.5,8.7,10.5c7,0,9.7-2.3,9.7-8.3c0-3.2-0.8-5.2-2.6-6.4c-1.5-1-3.6-1.4-7.2-1.4c-1.6,0-4.3,0.2-8.1,0.8L80,49.8L80,50.3z'\n\nproducts.forEach(function(productName) {\n\tselectConf.products.push(\n\t\t{\"name\": productName, svgString: mx6}\n\t);\n});\n\nexport default selectConf;\n\n\n\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/config/select-conf.js\n **/","module.exports = __webpack_public_path__ + \"assets/logo.png\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./assets/logo.png\n ** module id = 9\n ** module chunks = 0\n **/","module.exports = __webpack_public_path__ + \"assets/select/particle-map.png\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./assets/select/particle-map.png\n ** module id = 10\n ** module chunks = 0\n **/","import Stage from './stage.js';\n\n// Dependencies CONFIG.selects\nclass SelectCube extends Stage {\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.objects;\n\t\tthis._BASECROOD = new THREE.Vector3();\n\t\tthis._PLANEWIDTH = 1500;\n\t\tthis._PLANEHEIGHT = 1500;\n\t\tthis._CUBESIZE = 60; // 立方体大小\n\t\tthis._GRIDXCOUNT = (this._PLANEWIDTH / this._CUBESIZE)|0; // 横向个数\n\t\tthis._GRIDZCOUNT = (this._PLANEHEIGHT / this._CUBESIZE)|0; // 纵向 Z(向) 个数\n\t\tthis._CUBEHEIGHT = 400;\n\t\tthis._MINSCALE = 0.1; // 最小高度缩放\n\t\tthis._MAXSCALE = 0.6; // 最大高度缩放\n\t\tthis._cubes; // 存储方块信息的二维数组\t\t\n\t\tthis.isInit = false;\n\t}\n\n\t// this.objects\n\tinit() {\n\t\tthis.build();\n        this.isInit = true;\n\t}\n\n\tbuild() {\n\n\t\t// cubes\n\t\tthis._cubes = [];\n\n\t\tvar emptySpace = 0.3;\n\t\tvar cubeGroup = new THREE.Group();\n\t\tvar cubeMaterial;\n\t\tvar cubeGeom;\n\t\tvar cube;\n\t\tvar glowCube;\n\n\t\tfor (let i = 0; i < this._GRIDXCOUNT; i++ ) {\n\t\n\t\t\tfor (let j = 0; j < this._GRIDZCOUNT; j++ ) {\n\n\t\t\t\tvar x = this._BASECROOD.x - this._GRIDXCOUNT / 2 + i;\n\t\t\t\tvar z = this._BASECROOD.z - this._GRIDZCOUNT / 2 + j;\n\t\t\t\tif (x * x + z * z < this._GRIDXCOUNT * emptySpace * this._GRIDXCOUNT * emptySpace ||\n\t\t\t\t\t(Math.random() + 0.5) | 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis._cubes[i] = this._cubes[i] || [];\n\t\t\t\tthis._cubes[i][j] = {\n\t\t\t\t\tposition: {x: x, y: 0, z: z},\n\t\t\t\t\tscaleV: (Math.random() / 6000), // 缩放速度每一帧缩放 0.??\n\t\t\t\t\tscaleMin: this._MINSCALE + (this._MAXSCALE - this._MINSCALE) * Math.random() / 2,\n\t\t\t\t\tscaleMax: this._MAXSCALE - (this._MAXSCALE - this._MINSCALE) * Math.random() / 2, // 缩放范围\n\t\t\t\t};\n\t\t\t\t// console.log(this._cubes[i][j].position);\n\t\t\t\t// \n\t\t\t\tvar cubeSize = this._CUBESIZE *  (0.2 + 0.5 * Math.random());\n\t\t\t\tcubeGeom = new THREE.BoxGeometry(\n\t\t\t\t\t\t\t\tcubeSize, \n\t\t\t\t\t\t\t\tthis._CUBEHEIGHT, \n\t\t\t\t\t\t\t\tcubeSize,2,2,2\n\t\t\t\t\t\t\t);\n\t\t\t\tcubeMaterial = new THREE.MeshLambertMaterial(\n\t\t\t\t\t{\n\t\t\t\t\t\tcolor: 0xffffff,\n\t\t\t\t\t\t// transparent: true,\n\t\t\t\t\t\t// opacity: 0.9,\n\t\t\t\t\t\t// reflectivity: 1,\n\t\t\t\t\t\t// specular: 0xdddddd,\n\t\t\t\t\t\t// shininess: 90\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tcube = new THREE.Mesh(cubeGeom, cubeMaterial);\n\t\t\t\tcube.position.set(\n\t\t\t\t\t(this._cubes[i][j].position.x + Math.random() - 0.5) * this._CUBESIZE,\n\t\t\t\t\t0,\n\t\t\t\t\t(this._cubes[i][j].position.z + Math.random() - 0.5) * this._CUBESIZE\n\t\t\t\t);\n\t\t\t\tcube.scale.set(1, 0.01, 1);\n\t\t\t\tthis._cubes[i][j].cube = cube;\n\n\t\t\t\tvar glowCubeGeom = new THREE.BoxGeometry(\n\t\t\t\t\tcubeSize * 1.4, \n\t\t\t\t\tthis._CUBEHEIGHT  * 1.1, \n\t\t\t\t\tcubeSize * 1.4, 3, 8, 3\n\t\t\t\t);\n\t\t\t\tvar modifier = new THREE.SubdivisionModifier( 1 );\n\t\t\t\tmodifier.modify( glowCubeGeom ); \n\t\t\t\tglowCube = new THREE.Mesh(\n\t\t\t\t\tglowCubeGeom,\n\t\t\t\t\tnew THREE.GlowMaterial({\n\t\t\t\t\t\tc: 0.34,\n\t\t\t\t\t\tp: 2.8,\n\t\t\t\t\t\to: 0.3,\n\t\t\t\t\t\tcolor: new THREE.Color(0xffffff),\n\t\t\t\t\t\ttransparent: true\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\t\n\t\t\t\tglowCube.position.copy(cube.position);\n\t\t\t\tglowCube.scale.copy(cube.scale);\n\t\t\t\tthis._cubes[i][j].glowCube = glowCube;\n\n\t\t\t\tcubeGroup.add(cube);\n\t\t\t\tcubeGroup.add(glowCube);\n\n\n\n\t\t\t}\n\t\t}\n\n\t\tthis.objects.cubeGroup = cubeGroup;\n\n\n\t}\n\n\tentry() {\n\t\tObject.keys(this.objects).forEach(function(o) { M3.scene.add(this.objects[o]);}.bind(this));\n\t\tthis._moveCubes();\n\t}\n\n\tleave() {\n\t\t// or return a promise so that can do some ani\n\t\tthis.removeTick(); \n\t}\n\n\t_moveCube(cube) {\n\t\tvar that = this;\n\t\tvar target = {};\n\t\tvar dur;\n\n\t\tcube.scaleMin = this._MINSCALE + (this._MAXSCALE - this._MINSCALE) * Math.random() / 2;\n\t\tcube.scaleMax = this._MAXSCALE - (this._MAXSCALE - this._MINSCALE) * Math.random() / 2; // 缩放范围\n\t\t\n\t\tif (cube.cube.scale.y <= cube.scaleMin) {\n\t\t\ttarget.scale = new THREE.Vector3(1, cube.scaleMax + 0.01, 1);\n\t\t} else if (cube.cube.scale.y >= cube.scaleMax) {\n\t\t\ttarget.scale = new THREE.Vector3(1, cube.scaleMin - 0.01, 1);\n\t\t} else {\n\t\t\ttarget.scale = new THREE.Vector3(1, cube.scaleMin - 0.01, 1);\n\t\t}\n\t\t// target.scale.x = target.scale.z = target.scale.y < 0.7 ? 0.7: target.scale.y;\n\t\t// target.rotation = new THREE.Euler( 0, cube.cube.rotation.y + Math.random() * Math.PI * (1 - Math.random()), 0, 'XYZ' );\n\n\t\tdur = Math.abs(target.scale.y - cube.cube.scale.y) / cube.scaleV;\n\t\t\n\t\tcube.tween = that.addTHREEObjTween(cube.cube, target, dur, {\n\t\t\tonUpdate: function() {\n\t\t\t\tcube.glowCube.scale.copy(cube.cube.scale)//.multiplyScalar(1.5);\n\t\t\t\t//cube.glowCube.scale.y = cube.cube.scale.y + 0.2;\n\t\t\t},\n\t\t\tonComplete: function() {\n\t\t\t\t// console.log(target);\n\t\t\t\tthat.removeTween(cube.tween);\n\t\t\t\tthat._moveCube(cube);\n\t\t\t}\n\t\t});\n\t\tcube.tween.start();\n\n\n\t}\n\n\t// Normal 方块移动\n\t_moveCubes() {\n\t\tfor (let cube, i = this._cubes.length - 1; i >= 0; i--) {\n\t\t\tif (!this._cubes[i]) { continue; }\n\t\t\tfor (let j = this._cubes[i].length - 1; j >= 0; j--) {\n\t\t\t\tif (!this._cubes[i][j]) { continue; }\n\t\t\t\tcube = this._cubes[i][j];\n\t\t\t\tthis._moveCube(cube);\n\t\t\t};\n\t\t};\n\t}\n\n\n\n}\n\nexport default SelectCube;\n\n\n/** WEBPACK FOOTER **\n ** ./js/stages/select-cube.js\n **/","import Time from 'time.js';\nimport Stage from './stage.js';\nimport selectCfg from 'select-conf.js';\nimport ExplodeParticle from './explode-particles.js';\n\nclass Star extends Time {\n\tconstructor(initCrood) {\n\t\tsuper();\n\t\tthis.startLines = []; // 以此星星为起点的 Line\n\t\tthis.endLines = []; // 以此星星为终点的 Line\n\t\tthis.mesh;\n\t\tthis.connectStars = []; \n\t\tthis.initCrood = initCrood;\n\t\tthis.autoMoveTween;\n\t}\n\n\tinit() {\n\t\tthis.build();\n\t\tthis.mesh.position.set(0, 0, 0);\n\t\t// this.mesh.scale.set(0, 0, 0);\n\n\t\t// this.mesh.rotation.set(Math.random(), Math.random(), Math.random());\n\t\tthis.t = this.addTick(function() {\n\t\t\t// this.mesh.rotation.x += 0.02;\n\t\t\tthis.mesh.rotation.y += 0.006;\n\t\t\t// this.mesh.rotation.z += 0.02;\n\t\t}.bind(this));\n\n\t\tlet that = this;\n\t}\n\n\tbuild() {\n\t\t// create mesh\n\t\tvar gemo = new THREE.SphereGeometry(10, 10, 10);\n\t\tgemo = new THREE.TetrahedronGeometry(15, 0);\n\t\tif (Math.random() > 0) {\n\t\t\tgemo = new THREE.BoxGeometry(15, 15, 15);\n\t\t}\n\t\tvar material1 = new THREE.MeshBasicMaterial({color: 0x888888, wireframe: true});\n\t\tvar material2 = THREE.CustomMaterial.glass.clone();\n\t\t// material1.opacity = 0.2\n\t\t// var material2 = new THREE.MeshPhongMaterial({color: 0xabcdef, transparent: true, opacity: 0.7});\n\t\tvar mulMaterial = new THREE.MultiMaterial([/*material1, */material2]);\n\t\tvar mesh = new THREE.Mesh(gemo, mulMaterial);\n\t\t\n\t\tvar mesh = THREE.SceneUtils.createMultiMaterialObject(gemo, [material1, material2]);\n\n\n\t\tmesh.rotation.set(Math.random(), Math.random(), Math.random());\n\n\t\tthis.mesh = mesh;\n\t}\n\n\tsetCrood(crood) {\n\t\tthis.mesh.position.copy(crood);\n\t\tthis.startLines.forEach(function(line) { line.setStart(crood); });\n\t\tthis.endLines.forEach(function(line) { line.setEnd(crood); });\n\t}\n\n\n\tautoMove() {\n\t\tfunction move() {\n\t\t\tvar newCrood = that.initCrood.clone().add(new THREE.Vector3(\n\t\t\t\tMath.random() * 20,\n\t\t\t\tMath.random() * 20,\n\t\t\t\tMath.random() * 20\n\t\t\t));\n\t\t\tthat.moveTo(newCrood, move);\n\t\t}\n\t\tmove();\n\t}\n\n\tmoveTo(crood, callback) {\n\t\tautoMoveTween = this.addTHREEObjTween(this.mesh, {position: crood}, 2000 + Math.random() * 3000|0, {\n\t\t\tonUpdate: function() { \n\t\t\t\tthis.setCrood(this.mesh.position); \n\t\t\t}.bind(this),\n\t\t\tonComplete: callback\n\t\t}).start();\n\t}\n}\n\nclass ProductStar extends Star {\n\tconstructor(crood, svgString) {\n\t\tsuper(crood);\n\t\tthis.name;\n\t\tthis.svgString = svgString;\n\t}\n\n\tinit() {\n\t\tsuper.init();\n\t\tthis.removeTick(this.t);\n\t}\n\n\tbuild() {\n\t\tsuper.build();\n\t\tvar group = new THREE.Group();\n\t\tvar svgGemo = new THREE.SVGGemetry(this.svgString, {});\n\t\tvar material = new THREE.MeshBasicMaterial({color: 0x0cbbef});\n\t\t// var material = new THREE.MeshPhongMaterial({color: 0x0a4fdc});\n\t\tvar mesh = new THREE.Mesh(svgGemo, material);\n\t\tmesh.scale.set(0.2, 0.2, 0.2 );\n\t\tthis.svgMesh = mesh;\n\n\t\tvar initV = new THREE.Vector3(0,0,1);\n\t\tvar finalV = this.initCrood.clone().normalize();\n\n\t\tinitV.y = finalV.y = 0;\n\t\tvar axis = new THREE.Vector3();\n\t\taxis.crossVectors(initV, finalV).normalize();\n\t\tvar angle = Math.acos( initV.dot(finalV) / initV.length() / initV.length());\n\t\tvar quaternion = new THREE.Quaternion(); \n\n\t\tquaternion.setFromAxisAngle(axis, angle);\n\t\tmesh.rotation.setFromQuaternion(quaternion);\n\n\t\t\n\t\tgroup.add(mesh);\n\t\tgroup.add(this.mesh);\n\t\tthis.mesh = group;\n\t\t// this.mesh = mesh;\n\t}\n\n\tlightUp() {\n\n\t}\n}\n\nclass Line extends Time {\n\tconstructor(croodStart, croodEnd) {\n\t\tsuper();\n\t\tthis.start = croodStart.clone();\n\t\tthis.end = croodEnd.clone();\n\n\t\tthis.init();\n\t\tthis.setStart(croodStart);\n\t\tthis.setEnd(croodEnd);\n\t}\n\n\tinit() {\n\t\tvar material = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, opacity: 0.4});\n\t\tvar gemo = new THREE.Geometry();\n\t\tgemo.vertices.push(\n\t\t\tthis.start,\n\t\t\tthis.end\n\t\t);\n\t\tvar line = new THREE.Line(gemo, material);\n\t\tthis.mesh = line;\n\t\tthis.mesh.visible = false;\n\t}\n\n\tconnect(dur=2000, delay=0) {\n\t\tvar that = this;\n\t\tvar random = Math.random()*2|0;\n\t\tvar movePoint = ['start', 'end'][random];\n\t\tvar staticPoint = ['start', 'end'][(random+1) % 2];\n\t\tvar dest = this[movePoint].clone();\n\t\t\n\t\tfunction update() {\n\t\t\tthat.mesh.geometry.verticesNeedUpdate = true;\n\t\t\tthat.mesh.material.needUpdate = true;\n\t\t}\n\n\t\tthis.mesh.visible = true;\n\t\tthis[movePoint].copy(this[staticPoint]);\n\t\tthis[movePoint].animate(dest, 2000, delay, {onUpdate: update})\n\t\tthis.mesh.material.animate({opacity: 0.4}, 2000, delay, {onUpdate: update})\n\t}\n\n\tsetStart(crood) {\n\t\tthis.start.copy(crood);\n\t\tthis.mesh.geometry.verticesNeedUpdate = true;\n\t}\n\tsetEnd(crood) {\n\t\tthis.end.copy(crood);\n\t\tthis.mesh.geometry.verticesNeedUpdate = true;\n\t}\n}\n\nclass SelectStars extends Stage {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.isInit = false;\n\n\t\tthis._gridSize = 30;\n\t\tthis._starCount = 60;\n\t\tthis._rangeX = 20; // 边长\n\t\tthis._rangeY = 10; // 边长\n\t\tthis._rangeZ = 20; // 边长\n\t\t\n\t\tthis._minDistant = this._gridSize * 3; // 两个点之间最小间隔\n\t\tthis._maxConnectDistant = this._gridSize * 4; // 两个点的距离小于多少被连在一起\n\n\t\tthis._stars = [];\n\t\tthis._lines = [];\n\t\tthis._products;\n\n\t\tthis.explodeParticle = new ExplodeParticle();\n\t}\n\tinit() {\n\t\tthis._products = $.extend(true, [], selectCfg.products);\n\t\tthis.isInit = true;\n\t\treturn this._build();\n\t}\n\n\t_build() {\n\t\tlet that = this;\n\t\tlet starCroods = [];\n\t\tlet starCrood;\n\t\tlet isValidCrood = false;\n\t\tlet starGroup = new THREE.Group();\n\t\t\n\t\tlet toBaseVec = new THREE.Vector3(\n\t\t\t-this._gridSize * this._rangeX / 2,\n\t\t\t-this._gridSize * this._rangeY / 2,\n\t\t\t-this._gridSize * this._rangeZ / 2\n\t\t);\n\n\t\twhile(starCroods.length < this._starCount) {\n\n\t\t\tstarCrood = new THREE.Vector3(\n\t\t\t\tparseInt(this._rangeX * Math.random()) * this._gridSize, \n\t\t\t\tparseInt(this._rangeY * Math.random()) * this._gridSize, \n\t\t\t\tparseInt(this._rangeZ * Math.random()) * this._gridSize\n\t\t\t);\n\t\t\tstarCrood.add(toBaseVec);\n\n\t\t\tlet hasConnect = false;\n\t\t\tlet distantVec = new THREE.Vector3;\n\t\t\tlet distant;\n\t\t\tisValidCrood = starCroods.every(function(crood) {\n\t\t\t\tdistant = distantVec.subVectors(starCrood, crood).length();\n\t\t\t\thasConnect = (hasConnect || distant < that._maxConnectDistant);\n\t\t\t\treturn distant > that._minDistant;\n\t\t\t}) && hasConnect;\n\n\t\t\tif (!starCroods.length || isValidCrood) {\n\t\t\t\tstarCroods.push(starCrood);\n\t\t\t}\n\t\t}\n\n\t\t// 在生成的 stars 点中，随机选择作为产品 star\n\t\tlet productIndexes = new Set();\n\t\twhile(productIndexes.size < this._products.length) {\n\t\t\tproductIndexes.add((Math.random() * this._starCount)|0);\n\t\t}\n\t\t// console.log(starCroods, productIndexes);\n\t\tlet productCfgIndex = 0; // selectCfg.products 的 index\n\t\tstarCroods.forEach(function(starCrood, index) {\n\t\t\tvar star;\n\t\t\tif (productIndexes.has(index)) {\n\t\t\t\tstar = new ProductStar(starCrood, that._products[productCfgIndex].svgString);\n\t\t\t\tstar.init();\n\t\t\t\tstar.name = that._products[productCfgIndex].name;\n\t\t\t\tthat._products[productCfgIndex].star = star;\n\t\t\t\tproductCfgIndex++;\n\t\t\t} else {\n\t\t\t\tstar = new Star(starCrood); star.init();\n\t\t\t}\n\t\t\t// star.setCrood(starCrood);\n\t\t\tstar.setCrood(new THREE.Vector3(0, 0, 0));\n\t\t\t// star.mesh.scale.setScalar(0.0001);\n\t\t\tthat._stars.push(star);\n\t\t\tstarGroup.add(star.mesh);\n\t\t});\n\t\tthis.objects.starGroup = starGroup;\n\t\tthis.objects.starGroup.scale.setScalar(0.0001);\n\n\t\t// line\n\t\tlet line;\n\t\tlet lineGroup = new THREE.Group();\n\t\tthis._stars.forEach(function(iStar, i) {\n\t\t\tthat._stars.forEach(function(jStar, j) {\n\t\t\t\tif (\n\t\t\t\t\ti === j || \n\t\t\t\t\tiStar.connectStars.indexOf(jStar) !== -1 || \n\t\t\t\t\tjStar.connectStars.indexOf(iStar) !== -1 ||\n\t\t\t\t\t(new THREE.Vector3).subVectors(iStar.initCrood, jStar.initCrood).length() > that._maxConnectDistant\n\t\t\t\t) return;\n\n\n\t\t\t\tline = new Line(iStar.initCrood, jStar.initCrood);\n\t\t\t\tiStar.connectStars.push(jStar);\n\t\t\t\tjStar.connectStars.push(iStar);\n\t\t\t\tiStar.startLines.push(line);\n\t\t\t\tjStar.endLines.push(line);\n\t\t\t\tlineGroup.add(line.mesh);\n\t\t\t\tthat._lines.push(line);\n\t\t\t});\n\t\t});\n\t\tthis.objects.lineGroup = lineGroup;\n\t\t\n\t\t// import build\n\t\treturn new Promise(function(resolve) {\n\t\t\tthat.explodeParticle.build().then(function() {\n\t\t\t\tthat.objects.particleSystem = that.explodeParticle.particleSystem;\n\t\t\t\tresolve();\n\t\t\t}.bind(that));\n\t\t}).catch(e => console.error(e.stack));\n\n\t}\n\n\tentry() {\n\t\tvar that = this;\n\t\tObject.keys(this.objects).forEach(function(o) { M3.scene.add(this.objects[o]);}.bind(this));\n\n\n\t\t// lightUp\n\t\tthis.explodeParticle.lightUp().then(function() {\n\n\t\t\tthat.objects.starGroup.rotation.x = Math.PI * 20;\n\t\t\tthat.objects.starGroup.animate({\n\t\t\t\tscale: new THREE.Vector3(1,1,1),\n\t\t\t\trotation_x: 0 \n\t\t\t}, 800, 800);\n\n\t\t\tthat._stars.forEach(function(star) {\n\t\t\t\tstar.mesh.animate({position: star.initCrood}, 300, (/*Math.random() * 300 + */2000)|0 )\n\t\t\t});\t\n\n\t\t\treturn that.explodeParticle.explode();\n\t\t}).then(function() {\n\t\t\tthat._lines.forEach(function(line) {\n\t\t\t\tline.connect(3000, Math.random() * 2000);\n\t\t\t});\n\n\t\t\tthat._controls = new THREE.TrackballControls(that.camera, M3.renderer.domElement);\n\t\t\tthat._controls.staticMoving = true;\n\t\t\tthat._controls.travel = true;\n\t\t\tthat._t = that.addTick(function(delta) {\n\t\t\t\tthat._controls.update(delta);\n\t\t\t});\n\t\t});\n\n\t\t// control travel\n\t\t/*this.camera.position.set(0,0,1000);\n\t\tthis.camera.lookAt(new THREE.Vector3);\n\t\tthis._controls = new THREE.TrackballControls(this.camera, M3.renderer.domElement);\n\t\tthis._controls.staticMoving = true;\n\t\tthis._controls.travel = false;\n\t\tthis._t = this.addTick(function(delta) {\n\t\t\tthis._controls.update(delta);\n\t\t});*/\n\t}\n\n\t\n}\n\nexport default SelectStars;\n\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/stages/select-stars.js\n **/","import Time from 'time.js';\nimport selectCfg from 'select-conf.js';\n\n\nclass ExplodeParticles extends Time {\n    constructor() {\n        super();\n        this.particleSystem;\n        this.initPos = new THREE.Vector3(0, 0, 0);\n        this.finalPos = new THREE.Vector3(0, 0, 0);\n    } \n\n    init() {\n\n    }\n\n    build() {\n        var that = this;\n        var logoImg;\n        var particleMap;\n\n        return new Promise(function(loaded) {\n            logoImg = new Image();\n            logoImg.src = selectCfg.logoImg;\n            logoImg.onload = function() {\n                (new THREE.TextureLoader).load(selectCfg.particleMap, function(texture) {\n                    particleMap = texture;\n                    loaded();\n                });\n            };\n        }).then(function() {\n            var imgData = getImageData(logoImg, 0, 0, 0);\n            var zRandom = 200;\n            var yOffset = 0;//-500;\n            var geom = new THREE.Geometry();\n            var material = new THREE.PointsMaterial({\n                map: particleMap,\n                size: 3,\n                transparent: true,\n                opacity: 0.8,\n                sizeAttenuation: true,\n                color: 0xffffff,\n                blending: THREE.AdditiveBlending,\n                // vertexColors: THREE.FaceColors\n            });\n\n            imgData.forEach(function(pixel) {\n                let v3 = new THREE.Vector3(\n                    pixel.size.x * 1,\n                    pixel.size.y * 1 + yOffset,\n                    0\n                );\n                v3.initV = v3.clone(); // for lightUp\n                v3.lightupZ = (Math.random() - 0.5) * 5 * zRandom\n                v3.z = v3.lightupZ;\n\n                \n                v3.exAngle = Math.random() * Math.PI * 2; // for explode\n                v3.exAngleY = (Math.random() - 0.5) * Math.PI * 1; // for explode\n                v3.rPercent = Math.random() * 2 + 1\n                geom.vertices.push(v3);\n                // geom.vertices.push(v3);\n            });\n            that.particleSystem = new THREE.ParticleSystem(geom, material); \n            // M3.scene.add(that.particleSystem);\n            // console.log(that.particleSystem);\n        }).catch(e => console.error(e.stack));\n        //M3.scene.add(that.particleSystem);\n    }\n\n    lightUp() {\n        let that = this;\n        let dur = 4000;\n        let cameraTween;\n        \n        return new Promise(function(resolve) {\n            // camera ani\n            M3.camera.position.set(100, 0, -500);\n            M3.camera.lookAt(that.initPos);\n            M3.camera.up.set(1, 0, 0);\n            cameraTween = that.addTHREEObjTween(M3.camera, {\n                position: new THREE.Vector3(0, 0, 300),\n                up: new THREE.Vector3(0, 1 ,0)\n            }, dur, {\n                onUpdate() { M3.camera.lookAt(that.initPos); },\n                onComplete() { that.removeTween(cameraTween); }\n            }).start();\n\n            // particle ani\n            let particleTween = new TWEEN.Tween({z: 1}).to({z: 0}, dur * 1.2);\n            particleTween.easing(TWEEN.Easing.Cubic.InOut).onUpdate(function() {\n                let z = this.z;\n                that.particleSystem.geometry.verticesNeedUpdate = true;\n                that.particleSystem.geometry.vertices.forEach(function(v3) {\n                    v3.z = v3.lightupZ * z;\n                });\n            }).onComplete(()=>resolve()).start();\n            that.addTween(particleTween);\n        });\n    }\n\n    rise() {\n\t\tlet cameraTween = this.addTHREEObjTween(M3.camera, {\n\t\t\tposition: new THREE.Vector3(0, -500, 0),\n            lookAt: this.finalPos,\n            up: new THREE.Vector3(0, 1 ,0)\n\t\t}, dur, {\n\t\t\t// onUpdate() { M3.camera.lookAt(that.initPos); },\n            onComplete() { that.removeTween(cameraTween); }\n\t\t}).start();\n\n        let maxR = 300; // 旋转飞起最大半径\n        let maxA = Math.PI * 3; // 每个粒子旋转最大角度\n\n        \n    }\n\n    explode() {\n        let that = this;\n        let gatherDur = 2200;\n        let explodeDur = 3000;\n        let cameraDur = gatherDur + explodeDur;\n        let gatherTween = new TWEEN.Tween({p: 1}).to({p: -1}, gatherDur);\n        let explodeTween = new TWEEN.Tween({r: 0, size: 3}).to({r: 1000, size: 20}, explodeDur);\n        let cameraTween = new TWEEN.Tween({a: Math.PI*0.5}).to({a: Math.PI*2.5}, cameraDur + 1000);\n\n        cameraTween.easing(TWEEN.Easing.Cubic.InOut).onUpdate(function() {\n            // 聚集\n            let a = this.a;\n            M3.camera.position.x = Math.cos(a) * 300;\n            M3.camera.position.z = Math.sin(a) * 300;\n            M3.camera.position.y = Math.cos(a) * 200;\n            M3.camera.lookAt(that.initPos);\n        }).onComplete(function() { }).start();\n\n        gatherTween.easing(TWEEN.Easing.Cubic.InOut).onUpdate(function() {\n\n            // 聚集\n            let p = this.p > 0 ? this.p : 0;\n            that.particleSystem.geometry.verticesNeedUpdate = true;\n            that.particleSystem.geometry.vertices.forEach(function(v3) {\n                v3.setLength(v3.initV.length() * p);\n            });\n        }).onComplete(function() {\n            // console.log\n            // explode\n            explodeTween.start();\n\n        }).start();\n\n        this.addTween(gatherTween);  \n        this.addTween(explodeTween);  \n\n        return new Promise(function(resolve) {\n            explodeTween.easing(TWEEN.Easing.Cubic.Out).onUpdate(function() {\n                // explode\n                let r = this.r;\n                let planeR;\n                that.particleSystem.material.size = this.size;\n                that.particleSystem.material.needsUpdate = true;\n\n                that.particleSystem.geometry.verticesNeedUpdate = true;\n                that.particleSystem.geometry.vertices.forEach(function(v3) {\n                    planeR = r * v3.rPercent * Math.cos(v3.exAngleY);\n                    v3.y = r * v3.rPercent * Math.sin(v3.exAngleY);\n                    v3.x = planeR * Math.cos(v3.exAngle);\n                    v3.z = planeR * Math.sin(v3.exAngle);\n                });\n            }).onComplete(resolve)\n        });\n        this.addTween(gatherTween);  \n        this.addTween(explodeTween);  \n        \n    }\n\n    \n}\n\nexport default ExplodeParticles;\n\n\n/** WEBPACK FOOTER **\n ** ./js/stages/explode-particles.js\n **/","import View from './view.js';\nimport MobileStage from '../stages/display-mobile.js';\n// import DisplayContainerStage from '../stages/display-container.js';\n\nclass Display extends View {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._lockTick;\n\t\t// this._containerStage; \n\t\tthis._progressView;\n\n\t\tthis.name = 'display';\n\t\tthis.isInit = false;\n\t\tthis.active = false;\n\n\t\t// stages\n\t\tthis._mobileStages = {}; // {pro6: xx, mx6: xx} for cache\n\t\tthis._currentMobileStages = []; \n\t\tthis.stages = [];\n\n\t\t// UI\n\t\tthis._$domWrap = $('#displayView');\n\t\tthis._$domManager = $('.display-manager');\n\n\t\tthis._$windowWrap = $('#displayWindowWrap');\n\n\t\tthis._windowDoms = [];\n\t\tthis._currentWindowDoms = [];\n\n\t\tthis._progressView = M3.viewManager.getView('progress');\n\t\t// this._containerStage = new DisplayContainerStage();\n\t\t// this.stages.push(this._containerStage);\n\t}\n\n\t// data : {mobile: [pro5, mx6 ...]}\n\tactivate(data) {\n\t\tvar that = this;\n\t\t// check self init\n\t\tif (!this.isInit) {\n\t\t\tthis.init();\n\t\t\t// this._containerStage.init();\n\t\t}\n\n\t\tif (data) {\n\t\t\tvar mobiles = $.extend(true, [], data.mobiles);\n\t\t\tthis._currentMobileStages = [];\n\t\t\tmobiles.forEach(function(name, i) {\n\t\t\t\tif (!this._mobileStages[name]) {\n\t\t\t\t\tvar mobileStage = new MobileStage(name);\n\t\t\t\t\tthis._mobileStages[name] = mobileStage;\n\t\t\t\t\tthis._currentMobileStages.push(mobileStage);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\n\t\t\t// this._isload 如果检查到需要加载，会启动加载，并在加载完成之后调用回调\n\t\t\tif (!this._isLoad.bind(this)(this.activate.bind(this))) return;\t\n\t\t}\n\n\t\t// all loaded \n\t\t//this._containerStage.entry();// containerStage\n\n\t\tvar sizePos = calculateSubWindowSize(this._currentMobileStages.length);\n\t\tvar x = 0;\n\t\tvar entryCount = 0;\n\n\t\tthis._currentMobileStages.forEach(function(mobileStage, i, all) {\n\t\t\tvar meshPos = new THREE.Vector3(x + (i - (all.length/2)) * 100, 0, 0);\n\t\t\tmobileStage.entry(meshPos, sizePos[i]).then(function() {\n\t\t\t\tentryCount++;\n\t\t\t\tif (entryCount === all.length) {\n\t\t\t\t\t// todo entry animate done\n\t\t\t\t}\n\t\t\t});\n\t\t\tthat.stages.push(mobileStage);\n\t\t});\n\t\tthis._createWindowUI();this._resizeWindows();\n\n\t\t// UI\n\t\tthis._$domWrap.removeClass('none');\n\n\t\tthis.active = true;\n\t}\n\n\tinActivate() {\n\t\tObject.keys(this.scene).forEach(function(o) { M3.scene.remove(that.scene[o]);});\n\t\tthis.removeTick(sphereTick);\n\n\t\tthis._$domWrap.addClass('none');\n\t\tthis.activeWindows.forEach(function(activeWindow) {\n\t\t\tsetTimeout(function() {activeWindow.inActivate();}, 0);\n\t\t});\n\t\tthis.activeWindows.length = 0;\n\n\t\t// this._containerStage.leave();\n\t\tthis.stages = [];\n\t\tthis.active = false;\n\t}\n\n\tresize() {\n\t\tthis._resizeWindows();\n\t}\n\n\tinit() {\n\t\tvar that = this;\n\t\tvar $lockBtn = this._$domManager.find('.lock-btn');\n\t\tvar $unlockBtn = this._$domManager.find('.unlock-btn');\n\t\tvar $backBtn = this._$domManager.find('.back-btn');\n\n\t\tthat.isInit = true;\n\n\t\tthis._$domManager.on('click', '.setting-btn', function() {\n\t\t\tthat._$domManager.addClass('show');\n\t\t});\n\n\t\tthis._$domManager.on('click', '.lock-btn', function() {\n\t\t\t$lockBtn.addClass('none')\n\t\t\t$unlockBtn.removeClass('none');\n\t\t\tthat._$domManager.removeClass('show');\n\t\t\tthat._lock();\n\t\t});\n\n\t\tthis._$domManager.on('click', '.unlock-btn', function() {\n\t\t\t$unlockBtn.addClass('none')\n\t\t\t$lockBtn.removeClass('none');\n\t\t\tthat._$domManager.removeClass('show');\n\t\t\tthat._unlock();\n\t\t});\n\n\t\tthis._$domManager.on('click', '.back-btn', function() {\n\t\t\tthat.inActivate();\n\t\t\tthat.activateView('product-preview');\n\t\t\tthat._$domManager.removeClass('show');\n\t\t});\n\n\t\t// windows\n\t\tthis._$domWrap.on('click', '.reset-btn', function() {\n\t\t\tvar index = $(this).parents('.display-window').index();\n\t\t\tthat.resetWindow(index);\n\t\t});\n\n\t\tthis._$domWrap.on('click', '.close-btn', function() { \n\t\t\tvar index = $(this).parents('.display-window').index();\n\t\t\tthat._closeWindow(index);\n\t\t});\n\n\t\tthis._$domWrap.on('click', '.color', function() {\n\t\t\tvar index = $(this).parents('.display-window').index();\n\t\t\tvar color = $(this).data('color');\n\t\t\tthat._currentMobileStages[index].changeColor(color);\n\t\t\t$(this).addClass('selected').silbings().removeClass('selected');\n\t\t});\n\t}\n\n\t_isLoad(callback) {\n\t\tvar that = this;\n\t\tvar unloadedCount = 0;\n\t\tvar loaded = true;\n\t\tvar loadingInfos = {};\n\n\t\tfunction loading() {\n\t\t\tvar totalSize = 0;\n\t\t\tvar loadedSize = 0;\n\t\t\tvar progress;\n\t\t\tvar loadingInfo;\n\n\t\t\tfor (let name in loadingInfos) {\n\t\t\t\tloadingInfo = loadingInfos[name];\n\t\t\t\ttotalSize += loadingInfo.size;\n\t\t\t\tloadedSize += loadingInfo.progress * loadingInfo.size;\n\t\t\t}\n\n\t\t\tprogress = loadedSize/totalSize;\n\t\t\tthat._showProgress(progress);\n\t\t\tif (unloadedCount === 0) {\n\t\t\t\t// loaded \n\t\t\t\tcallback(); that._progressView.inactivate();\n\t\t\t}\n\t\t}\n\n\t\tfor (let name in this._mobileStages) {\n\t\t\t// loading\n\t\t\tif (!this._mobileStages[name].isInit) {\n\t\t\t\tloaded = false;\n\t\t\t\tunloadedCount++;\n\t\t\t\tloadingInfos[name] = {\n\t\t\t\t\tsize: this._mobileStages[name].size,\n\t\t\t\t\tprogress: 0\n\t\t\t\t};\n\t\t\t\t(function(_name) { \n\t\t\t\t\tthat._mobileStages[_name].init(function(progress) {\n\t\t\t\t\t\tloadingInfos[_name].progress = progress;\n\t\t\t\t\t\tloading();\n\t\t\t\t\t}).then(function() {\n\t\t\t\t\t\tunloadedCount--;\n\t\t\t\t\t\tloadingInfos[_name].progress = 1;\n\t\t\t\t\t\tloading();\n\t\t\t\t\t}).catch(function(e) { console.error(e.stack); });\n\t\t\t\t})(name);\n\t\t\t}\n\t\t}\n\t\tif (!loaded) { this._progressView.activate(); }\n\n\t\treturn loaded;\n\t}\n\n\t_showProgress(progress) {\n\t\t//console.log('display.js loading: ' + progress);\n\t\tthis._progressView.setProgress(progress);\n\t} \n\n\t_createWindowUI() {\n\t\tvar windowTemplate = \n\t\t\t'<div class=\"display-window\">' + \n\t\t\t\t'<div class=\"window-control\">' + \n\t\t\t\t\t'<i class=\"btn reset-btn icon ion-ios-reload\"></i>' + \n\t\t\t\t\t'<i class=\"btn close-btn icon ion-ios-close-empty\"></i>' + \t\t\t\n\t\t\t\t'</div>' + \n\t\t\t\t'<div class=\"colors-control\"></div>' + \n\t\t\t'</div>';\n\t\tvar colorTemplate = '<i class=\"color @color\" data-color=\"@color\"></i>';\n\t\tvar colorHTML = '';\n\n\t\tthis._$windowWrap.html('');\n\t\tthis._currentWindowDoms = [];\n\t\tthis._currentMobileStages.forEach(function(mobileStage, i) {\n\t\t\tif (!this._windowDoms[i]) {\n\t\t\t\tthis._windowDoms[i] = $(windowTemplate);\n\t\t\t}\n\t\t\tthis._currentWindowDoms[i] = this._windowDoms[i];\n\t\t\tthis._$windowWrap.append(this._currentWindowDoms[i]);\n\n\t\t\tcolorHTML = '';\n\t\t\tmobileStage.getColors().forEach(function(color) {\n\t\t\t\tcolorHTML += colorTemplate.replace(/\\@color/g, color);\n\t\t\t});\n\t\t\tthis._currentWindowDoms[i].find('.colors-control').empty().html(colorHTML);\n\t\t}.bind(this));\n\t}\n\n\t// 模型恢复初始状态\n\tresetWindow(index) {\n\t\tif (this._lockTick) {\n\t\t\tthis._currentMobileStages[0].reset();\n\t\t} else {\n\t\t\tthis._currentMobileStages[index].reset();\n\t\t}\n\t}\n\n\t_closeWindow(index) { \n\t\tthis._currentMobileStages[index].remove();\n\t\tthis._currentMobileStages.splice(index, 1);\n\n\t\t// ui remove\n\t\tthis._currentWindowDoms[index].remove();\n\t\tthis._currentWindowDoms.splice(index, 1);\n\t\tthis._resizeWindows();\n\t}\n\n\t_resizeWindows() {\n\t\tvar sizePos = calculateSubWindowSize(this._currentMobileStages.length);\n\n\t\t// stage resize\n\t\tthis._currentMobileStages.forEach(function(mobileStage, i) {\n\t\t\tmobileStage.resizeWindow(sizePos[i]);\n\t\t});\n\n\t\t// ui resize\n\t\tsizePos = $.extend(true, [], sizePos);\n\t\tsizePos.forEach(function(item) {\n\t\t\tfor (let pos in item) {\n\t\t\t\titem[pos] *= 100; item[pos] += '%'; \n\t\t\t}\n\t\t});\n\n\t\tthis._currentWindowDoms.forEach(function($windowDom, i) { \n\t\t\t$windowDom.css(sizePos[i]); \n\t\t});\n\t}\n\n\t_lock() {\n\t\tthis._currentMobileStages.forEach(function(mobileStage, i) {\n\t\t\tmobileStage.lock(i === 0);\n\t\t});\n\n\t\tthis._lockTick = this.addTick(function() {\n\t\t\tvar sizeInfo = this._currentMobileStages[0].getSize();\n\t\t\tthis._currentMobileStages.forEach(function(mobileStage, i) {\n\t\t\t\tif (i > 0) mobileStage.setSize(sizeInfo);\n\t\t\t});\n\t\t}.bind(this));\n\t}\n\n\t_unlock() {\n\t\tthis._currentMobileStages.forEach(function(mobileStage, i) {\n\t\t\tmobileStage.unlock();\n\t\t});\n\t\tthat.removeTick(this._lockTick); this._lockTick = null;\n\t}\n\n\n}\n\nexport default Display;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/view/display.js\n **/","import Stage from './stage.js';\nimport Mobile from './mobile.js';\nimport TrackballControls from 'm3-trackballcontrol.js';\n\nclass DisplayMobile extends Stage {\n\n\tconstructor(mobileName) {\n\t\tsuper();\n\t\tthis._windowSize; // for px calculate\n\t\tthis._winSizePX; // for render \n\n\t\t// 3D 资源\n\t\tthis._camera;\n\t\tthis._mobile;\n\n\t\tthis.name; // pro5?\n\t\tthis.size;\n\t\tthis.isInit = false;\n\n\t\tthis.trackball;\n\t\tthis.objects = {};\n\t\tthis.target;\n\n\t\t// 模型位置，旋转等信息\n\t\tthis.objectSizes = {\n\t\t\tmodel : {position: null, rotation: null},\n\t\t\tcamera : {position: null, lookAt: null}\n\t\t};\n\n\t\t// 状态\n\t\tthis.state;\n\n\t\tthis.color;\n\n\t\tthis.locked = false;\n\t\tthis.active = false;\n\n\t\tthis.name = mobileName;\n\t\tthis._mobile = new Mobile(this.name);\n\t\tthis.size = this._mobile.size;\n\t}\n\n\tload(onProgress) {\n\t\treturn this._mobile.load(onProgress);\n\t}\n\n\tinit(onProgress) {\n\t\tvar that = this;\n\t\treturn this.load(onProgress).then(function() {\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t// init\n\t\t\t\tthat.objects.mesh = that._mobile.mesh;\n\t\t\t\tthat._setupScene();\n\t\t\t\tthat.isInit = true;\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}).catch(function(e) { console.log(e.stack); });;\n\t}\n\n\tentry(meshPos, windowSize) {\n\t\tthis._windowSize = windowSize;\n\t\t// 3d\n\t\tthis.target = new THREE.Vector3(meshPos.x, meshPos.y, meshPos.z);\n\n        this.objects.mesh.position.copy(this.target);\n        // this.objects.mesh.rotation.copy(new THREE.Euler(Math.PI/3, -0.2, .8, 'XYZ' ));\n        this._camera.up.copy(M3.camera.up);\n        this._camera.position.copy(M3.camera.position);\n\t\tthis._camera.position.z += 40;\n\t\tthis._camera.lookAt(THREE.THREEUtil.getLookAt(M3.camera));\n\n\t\t// light\n        this.objects.spotLight.position.copy(this.target);\n        this.objects.spotLight.position.y += 200;\n        this.objects.spotLight.position.x += 300;\n        this.objects.spotLight.position.z += 100;\n        this.objects.spotLight.lookAt(this.target); \n\n\t\t// initial size info\n\t\tthis.objectSizes = {mesh: {}, camera: {}};\n\t\tthis.objectSizes.mesh.position = this.objects.mesh.position.clone();\n\t\tthis.objectSizes.mesh.rotation = this.objects.mesh.rotation.clone();\n\n\t\tthis.objectSizes.camera.position = this.objects.mesh.position.clone();\n\t\tthis.objectSizes.camera.position.z += 50;\n\t\tthis.objectSizes.camera.lookAt = this.objects.mesh.position.clone();\n\n\t\t// 添加到场景\n\t\tObject.keys(this.objects).forEach(function(o) { M3.scene.add(this.objects[o]);}.bind(this));\n\t\t\n\t\tthis.resize();\n\n\t\tthis._changeColor();\n\t\tthis.addTick(this._render.bind(this));\n\n\t\treturn this._playEntryAnimation();\n\t}\n\n\t// 窗口关闭\n\tleave() {\n\n\t\t// 移除模型\n\t\tconsole.log(Object.keys(this.objects));\n\t\tObject.keys(this.objects).forEach(function(o) { M3.scene.remove(that.objects[o]);});\n\t\t// render();\n\t\tthis.$domElem.remove();\n\t\tthis.getView('display-manager').removeWindow(this);\n\t\tthis.removeTween();\n\t\tthis.removeTick();\n\t\tthis.active = false;\n\t}\n\n\t// 窗口重置\n\tresize() {\n\t\tvar winWidth = window.innerWidth;\n\t\tvar winHeight = window.innerHeight;\n\n\t\tthis._winSizePX = {};\n\t\tthis._winSizePX['left'] = parseInt(winWidth * this._windowSize['left']);\n\t\tthis._winSizePX['width'] = parseInt(winWidth * this._windowSize['width']);\n\t\tthis._winSizePX['top'] = parseInt(winHeight * this._windowSize['top']);\n\t\tthis._winSizePX['height'] = parseInt(winHeight * this._windowSize['height']);\n\n\t\tthis._winSizePX['bottom'] = winHeight - this._winSizePX['height'] - this._winSizePX['top'];\n\n\t\tthis._camera.aspect = this._winSizePX['width'] / this._winSizePX['height'];\n\t\tthis._camera.updateProjectionMatrix();\n\n\t\tthis.trackball.handleResize(this._winSizePX);\n\t}\n\n\tresizeWindow(windowSize) {\n\t\tvar that = this;\n\t\tvar initSize = this._windowSize;\n\t\tvar finalSize = windowSize;\n\n\t\tthis.setState('animate');\n\t\tvar resizeTween = new TWEEN.Tween(initSize).easing(TWEEN.Easing.Cubic.InOut).to(finalSize, 1000).onUpdate(function() {\n\t\t\tthat._windowSize = this;\n\t\t\tthat.resize();\n\t\t}).onComplete(function() {\n\t\t\tthat.removeTween(resizeTween);\n\t\t\tthat.setState('handle');\n\t\t}).start();\n\t}\n\n\tsetState(state) { \n\t\tthis.state = state;\n\t\tif (state === 'handle') { \n\t\t\tthis.trackball.init(this._camera, this.objects.mesh);\n\t\t\tthis.resize(); \n\t\t\t!this.locked && this.trackball && (this.trackball.enabled = true);\n\t\t} else {\n\t\t\t!this.locked && this.trackball && (this.trackball.enabled = false);\n\t\t}\n\t}\n\n\t// 获取模型旋转信息，相机相对信息，用于设置其他 displayWindow 使表现一致；\n\tgetSize() {\n\t\tvar size = {};\n\n\t\tsize.modelRotation = this.objects.mesh.rotation.clone();\n\t\tsize.cameraRotation = this._camera.rotation.clone();\n\t\tsize.cameraUp = this._camera.up.clone();\n\t\tsize.eye = (new THREE.Vector3).subVectors(this._camera.position, this.objects.mesh.position);\n\n\t\treturn size;\n\t}\n\n\tsetSize(size) {\n\t\tthis.objects.mesh.rotation.copy(size.modelRotation);\n\t\t// this._camera.rotation.copy(size.cameraRotation);\n\t\t// this._camera.up = size.cameraUp;\n\t\tthis._camera.position.addVectors(this.objects.mesh.position, size.eye);\n\t\tthis._camera.lookAt(this.objects.mesh);\n\t}\n\n\tlock(isMain) {\n\t\tthis.locked = true;\n\t\tif (isMain) {\n\t\t\tthis.trackball.enabled = true;\n\t\t\tthis.trackball.fullScreen = true;\n\t\t} else {\n\t\t\tthis.trackball.enabled = false;\n\t\t}\n\t\tthis.reset();\n\t}\n\n\tunlock() {\n\t\tthis.locked = false;\n\n\t\tthis.trackball.enabled = true;\n\t\tthis.trackball.fullScreen = false;\n\t\tthis.reset();\n\t}\n\n\tgetColors() {\n\t\tif (this._mobile) {\n\t\t\treturn this._mobile.getColors();\n\t\t}\n\t}\n\n\t/*\n\t * 从scene 中移除模型\n\t */\n\tremove() {\n\t\tsuper.remove();\n\t\tthis.removeTick();\n\t}\n\n\t// model，trackball 重置\n\treset() { \n\t\t//console.log(this.objectSizes.mesh.position);\n\t\tthis.setState('animate');\n\t\t\n\t\tvar initModelRotation = this.objectSizes.mesh.rotation;\n\t\tvar initCameraPosition = this.objectSizes.camera.position;\n\t\tvar initCameraLookAtPosition = this.objectSizes.camera.position;\n\n\t\tthis.addTHREEObjTween(this.objects.mesh, {\n        \trotation: initModelRotation\n        }, 1000).start();\n\t\t\n\t\tthis.addTHREEObjTween(this._camera, {\n        \tposition: initCameraPosition,\n        \tlookAt: initCameraLookAtPosition\n        }, 1000, {\n        \tonComplete: function() {\n        \t\tthis.setState('handle');\n        \t}.bind(this)\n        }).start();   \n\t}\n\n\t_setupScene() {\n\n\t\t// 3D 相关资源创建\n \t\tthis.objects.spotLight = new THREE.SpotLight(0xeeeeee);\n \t\tthis.objects.spotLight.intensity = 1;\n\t\tthis._camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);\n\n\n        this.trackball = new TrackballControls(this._camera);\n        // this.trackball.enabled = false;\n\t}\n\n\t_changeColor(color) {\n\t\tthis._mobile.changeColor(color);\n\t}\n\n\t/* 动画 */\n\t_playEntryAnimation() {\n\t\tvar that = this;\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tthat.setState('animate');\n\n\t\t\tvar initModelRotation = that.objectSizes.mesh.rotation;\n\t\t\tvar initCameraPosition = that.objectSizes.camera.position;\n\n\t\t\tthat.objects.mesh.rotation.copy(initModelRotation);\n\t\t\tthat.objects.mesh.rotation.x -= Math.PI * 0.5;\n\t\t\tthat.objects.mesh.rotation.z += Math.PI * 1.2;\n\t\t\tthat.addTHREEObjTween(that.objects.mesh, {\n\t\t\t\trotation: initModelRotation\n\t\t\t}, 2000).start();\n\n\t\t\tthat.addTHREEObjTween(that._camera, {\n\t\t\t\tposition: initCameraPosition\n\t\t\t}, 2000, {\n\t\t\t\tonComplete: function() {\n\t\t\t\t\tthat.setState('handle');\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t}).start();\n\t\t});\n\t}\n\n\t_render() {\n\n\t\tM3.renderer.setViewport(this._winSizePX['left'], this._winSizePX['bottom'], this._winSizePX['width'], this._winSizePX['height']);\n\t\tM3.renderer.setScissor(this._winSizePX['left'], this._winSizePX['bottom'], this._winSizePX['width'], this._winSizePX['height']);\n\t\tM3.renderer.setScissorTest(true);\n\t\tthis._camera.aspect = this._winSizePX['width'] / this._winSizePX['height'];\n\t\tthis._camera.updateProjectionMatrix();\n\t\tM3.renderer.render( M3.scene, this._camera );\t\n\t\tthis.trackball.update();\t\t\n\t}\n}\n\nexport default DisplayMobile;\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/stages/display-mobile.js\n **/","// Dependencies CONFIG.mobiles\nimport Time from 'time.js';\nimport Loader from 'loader.js';\nimport MobileConfigs from 'mobile-conf.js';\n\nvar loader = new Loader();\nvar mobileEnvMap;\nvar JSONLoader = new THREE.JSONLoader();\n\n\n\nclass Mobile extends Time {\n\n\tconstructor(mobileName) { \n\t\tsuper();\n\n\t\tthis.mesh; // group\n\t\tthis.size; // 资源大小\n\n\t\tthis.config;\n\t\tthis._materials;\n\t\tthis._colors = [];\n\t\tthis._currentColor;\n\t\tthis._uuidMaterialNameMap = {};\n\t\tthis._texturePath = './assets/texture/';\n\n\t\tMobileConfigs.forEach(function(mobile) {\n\t\t\tif (mobile.name === mobileName) {\n\t\t\t\tthis.config = mobile;\n\t\t\t}\n\t\t}.bind(this));\n\t\tthis.size = loader.calculateSize(this.config);\n\t}\n\n\tgetColors() {\n\t\treturn this._colors;\n\t}\n\n\tchangeColor(color) {\n\t\tif (this._currentColor === color) return;\n\t\tif (this._colors.indexOf(color) < 0) {\n\t\t\tconsole.log('No this color');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.mesh.children.forEach(function(child) {\n\t\t\tvar materialName = this._uuidMaterialNameMap[uuid];\n\n\t\t\tthis._materials[color].forEach(function(material) {\n\t\t\t\tif (material.name.replace(/\\d*$/, '') === materialName.replace(/\\d*$/, '')) {\n\t\t\t\t\tchild.material = material;\n\t\t\t\t\tchild.material.needsUpdate = true;\n\t\t\t\t}\t\t\t\t\n\t\t\t});\n\t\t});\n\t}\n\n\tload(onProgress) {\n\t\tvar that = this;\n\t\tvar models;\n\t\tvar materials;\n\t\tvar group = new THREE.Group();\n\t\tvar loadPromise = loader.load(this.config, onProgress);\n\n\t\treturn loadPromise.then(function(modelRes) {\n\t\t\tmodels = JSON.parse(modelRes.mobile.models);\n\t\t\treturn new Promise(function(resolve) {\n\t\t\t\tthat._materials = models.materials;\n\t\t\t\tfor (var color in that._materials) {\n\t\t\t\t\tthat._colors.push(color);\n\t\t\t\t\tthat._currentColor = that._colors[0];\n\t\t\t\t\tthat._materials[color] = that._JSONLoaderParse(that._materials[color]).materials;\n\t\t\t\t}\n\t\t\t\tfor (let modelName in models.models) {\n\n\t\t\t\t\tvar mParse = that._JSONLoaderParse(models.models[modelName]);\n\t\t\t\t\tvar geometry = mParse.geometry;\n\t\t\t\t\tvar material = mParse.materials[0];\n\t\t\t\t\tvar model;\n\n\t\t\t\t\tif (material.name.match('glass')) {\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t/*if (material.name.indexOf('metal') >= 0) {\n\t\t\t\t\t\tvar texture = new THREE.ImageUtils.loadTexture('./assets/pro5/metal.jpg');\n\t\t\t\t\t\ttexture.repeat.set(50,50);\n\t            \t\ttexture.wrapS = THREE.RepeatWrapping;\n\t            \t\ttexture.wrapT = THREE.RepeatWrapping;\n\n\t\t\t\t\t\tmaterial = new THREE.MeshPhongMaterial({\n\t\t\t\t\t\t\tmap: texture,\n\t\t\t\t\t\t\tbumpMap: texture,\n\t\t\t\t\t\t\tbumpScale: 0.1\n\t\t\t\t\t\t\t// aoMapIntensity: 2\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}*/\n\n\t\t\t\t\tmaterial.side = THREE.DoubleSide;\n\t\t\t\t\tmaterial.transparent = (material.opacity === 1?false:true);\n\t\t\t\t\tmodel = new THREE.Mesh(geometry, material);\n\n\t\t\t\t\tthat._uuidMaterialNameMap[model.uuid] = mParse.materials[0].name;\n\t\t\t\t\tgroup.add(model);\n\t\t\t\t}\n\t\t\t\tthat.mesh = group;\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}).catch(function(e) { console.error(e.stack); });\n\t}\n\n\t_JSONLoaderParse(json) {\n\n\t\tif(typeof json === 'string') {\n\t\t\tjson = JSON.parse(json);\n\t\t}\n\t\t// change path\n\t\tif (json.materials && typeof json.materials !== 'string') {\n\t\t\tjson.materials.forEach(function(material) {\n\t\t\t\tif (material.mapDiffuse) {\n\t\t\t\t\tmaterial.mapDiffuse = '';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn JSONLoader.parse(json, location.pathname.replace(/[^\\/]+$/, ''));\n\t}\n}\n\nexport default Mobile;\n\n\n/** WEBPACK FOOTER **\n ** ./js/stages/mobile.js\n **/","// 下载缓存\nvar loadedCache = {};\n\nclass Loader {\n\tconstructor() {}\n\n\tcalculateSize(loadParams) {\n\t\tvar totalSize = 0;\n\t\tvar loadTasks = this._getLoadTasks(loadParams);\n\n\t\tfor (var i = 0; i < loadTasks.length; i++) {\n\t\t\ttotalSize += loadTasks[i].size;\n\t\t}\n\t\treturn totalSize;\n\t}\n\n\t// Params 下载任务格式 {url: xx, size: xx}\n\tload(loadParams, onProgress) {\n\t\tvar that = this;\n\t\treturn new Promise(function(onLoad, reject) {\n\t\t\tvar totalSize = 0; // 总大小\n\t\t\tvar loadedSize = 0; // 已经下载大小\n\t\t\tvar loadTasks = [];\n\t\t\tvar loadTask;\n\n\t\t\tloadTasks = that._getLoadTasks(loadParams); \n\n\t\t\tfunction getLoadedSize() {\n\t\t\t\tvar loadedSize = 0;\n\t\t\t\tloadTasks.forEach(function(_loadTask) { \n\t\t\t\t\tloadedSize += _loadTask.loaded\n\t\t\t\t});\n\t\t\t\treturn loadedSize;\n\t\t\t}\n\t\t\tfor (var i = 0; i < loadTasks.length; i++) {\n\t\t\t\tloadTask = loadTasks[i];\n\t\t\t\tloadTask.loaded = 0;\n\t\t\t\ttotalSize += loadTask.size;\n\n\t\t\t\tif (loadedCache[loadTask.url]) {\n\t\t\t\t\tloadTask.loaded = loadTask.size;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t(function(loadTask) {\n\t\t\t\t\tloadMethod[loadTask.type](loadTask.url, function(res) {\n\t\t\t\t\t\tloadedCache[loadTask.url] = res;\n\t\t\t\t\t\tloadTask.loaded = loadTask.size;\n\n\t\t\t\t\t\t// 成功回调\n\t\t\t\t\t\tif (getLoadedSize() / totalSize === 1) {\n\t\t\t\t\t\t\tonLoad(that._getResults(loadParams));\n\t\t\t\t\t\t}\n\t\t\t\t\t}, function(progress) {\n\t\t\t\t\t\tloadTask.loaded = loadTask.size * progress;\n\t\t\t\t\t\tonProgress(getLoadedSize() / totalSize);\n\t\t\t\t\t});\n\t\t\t\t})(loadTask);\n\t\t\t}\t\t\t\n\t\t});\n\n\t}\n\n\t// 获取下载类型\n\t_getLoaderType(ext) {\n\t\tvar typeExtMap = {\n\t\t\t'img': /(jpg|jpeg|gif|png)/,\n\t\t\t'json': /json/,\n\t\t\t'js': /js/\n\t\t};\n\n\t\tfor (var type in typeExtMap) {\n\t\t\tif (typeExtMap[type].test(ext)) {\n\t\t\t\treturn type;\n\t\t\t}\n\t\t}\n\t}\n\n\t// 收集下载参数里的 url\n\t_getLoadTasks(_params) { \n\t\tvar urlRegx = /.+\\.(\\w{1,6})$/;\n\t\tvar sizeDefault = {\n\t\t\t'img': 100,\n\t\t\t'json': 100\t\n\t\t};\n\t\tvar that = this;\n\n\t\tfunction _getLoadTasks(params) {\n\t\t\tvar urls = [];\n\t\t\tvar type;\n\n\t\t\tif (Object.prototype.toString.call(params) === '[object Array]') {\n\t\t\t\tparams.forEach(function(param) {\n\t\t\t\t\turls = urls.concat(_getLoadTasks(param));\n\t\t\t\t});\n\t\t\t} else if (typeof params === 'object' && !params.url){\n\t\t\t\tfor (var key in params) {\n\t\t\t\t\turls = urls.concat(_getLoadTasks(params[key]));\n\t\t\t\t}\n\t\t\t} else if (typeof params === 'object' && params.url) {\n\t\t\t\t// 符合资源格式 {url: xx, size: xx}\n\t\t\t\ttype = params.url.match(urlRegx)[1];\n\n\t\t\t\turls.push({\n\t\t\t\t\t'url': params.url,\n\t\t\t\t\t'size': (params.size || sizeDefault[type] || 1),\n\t\t\t\t\t'type': params.type || that._getLoaderType(type)\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn urls;\n\t\t}\n\t\treturn _getLoadTasks(_params);\n\t}\n\n\t// 遍历下载参数里的 url， 替换成下载结果缓存\n\t_getResults(_params) {\n\t\tvar params = $.extend(true, {}, _params);\n\n\t\tfunction _getResults(params) {\n\t\t\tif (Object.prototype.toString.call(params) === '[object Array]') {\n\t\t\t\treturn (params.map(function(param) {\n\t\t\t\t\treturn _getResults(param);\n\t\t\t\t}));\n\t\t\t} else if (typeof params === 'object' && !params.url) {\n\t\t\t\tfor (var key in params) {\n\t\t\t\t\tparams[key] =  _getResults(params[key]);\n\t\t\t\t}\n\t\t\t\treturn params;\n\t\t\t} else if (typeof params === 'object' && params.url) {\n\t\t\t\treturn loadedCache[params.url];\n\t\t\t} else {\n\t\t\t\treturn params;\n\t\t\t}\n\t\t}\n\n\t\treturn _getResults(params);\n\t}\n}\n\n\n/*\n * 下载 URL等配置在loadconfig.params 中\n * loadMethod 根据不同type 应用相应策略下载资源缓存在 loaded cache 中\n * img直接缓存 url \n */\nvar loadMethod = {\n\n\t// 下载图片\n\t'img': function(url, onload, onProgress) {\n\t\tvar imgLoader = new THREE.ImageLoader();\n\t\timgLoader.load(url, function() {\n\t\t\tonload(url);\n\t\t}, function(xhr) {\n\t\t\treturn onProgress(xhr.loaded / xhr.total);\n\t\t});\n\t},\n\n\t// 下载 模型\n\t'json': function(url, onload, onProgress) {\n\t\tvar xhrLoader = new THREE.XHRLoader();\n\t\txhrLoader.load(url, onload, function(xhr) {\n\t\t\treturn onProgress(xhr.loaded / xhr.total);\n\t\t});\n\t},\n\n\t// model \n\t'model': function(url, onload, onProgress) {\n\t\tvar xhrLoader = new THREE.XHRLoader();\n\t\txhrLoader.load(url, function(str) {\n\t\t\tonload(str.replace(/module\\.exports\\s*=\\s*/, ''));\n\t\t}, function(xhr) {\n\t\t\treturn onProgress(xhr.loaded / xhr.total);\n\t\t});\n\t},\n\n\t// 下载 script \n\t'js': function(url, onload, onProgress) {\n\n\t\tvar req = new XMLHttpRequest();\n\n\t\t// report progress events\n\t\treq.addEventListener(\"progress\", function(xhr) {\n\t\t    if (xhr.lengthComputable) {\n\t\t        onProgress(xhr.loaded / xhr.total);\n\t\t    }\n\t\t}, false);\n\n\t\t// load responseText into a new script element\n\t\treq.addEventListener(\"load\", function(event) {\n\t\t    var e = event.target;\n\t\t    var s = document.createElement(\"script\");\n\t\t    s.innerHTML = e.responseText;\n\t\t    // or: s[s.innerText!=undefined?\"innerText\":\"textContent\"] = e.responseText\n\t\t    document.documentElement.appendChild(s);\n\t\t\tonload();\n\t\t    /*s.addEventListener(\"load\", function() {\n\t\t    \tconsole.log(1);\n\t\t        \n\t\t    });*/\n\t\t}, false);\n\n\t\treq.open(\"GET\", url);\n\t\treq.send();\n\t}\n}\n\nexport default Loader;\n\n\n/** WEBPACK FOOTER **\n ** ./js/common/loader.js\n **/","// 模型是 webpack Chunk，需要知道webpack 处理之后的路径\nvar buildPath = './build/'; \n\nvar products = ['pro6', 'pro5', 'mx5', 'mx6', 'meilan3s', 'meilan3', 'meilannote3'];\n\nvar mobile = {\n\t'models': {url: buildPath + require('assets/mobiles/pro5/pro5.js'), size: 300, 'type': 'model'},\n\t\n\t// 贴图，file-loader 获取路径\n\t'map': {\n\t\t'default': {url: require('assets/mobiles/pro5/pro5uv.png'), size: 3000}\n\t}\n};\n\nvar mobiles = [];\n\nproducts.forEach(function(productName) {\n\tmobiles.push(\n\t\t{\"name\": productName, mobile: mobile}\n\t);\n});\n\nexport default mobiles;\n\n\n/** WEBPACK FOOTER **\n ** ./js/config/mobile-conf.js\n **/","module.exports = __webpack_public_path__ + \"assets/mobiles/pro5/pro5.js\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./assets/mobiles/pro5/pro5.js\n ** module id = 19\n ** module chunks = 0\n **/","module.exports = __webpack_public_path__ + \"assets/mobiles/pro5/pro5uv.png\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./assets/mobiles/pro5/pro5uv.png\n ** module id = 20\n ** module chunks = 0\n **/","/**\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin \t/ http://mark-lundin.com\n */\n\nvar TrackballControls = function () {\n\n\tvar _this = this;\n\tvar STATE = { NONE: -1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n\tthis.domElement = document;\n\n\t// API\n\n\tthis.enabled = true;\n\n\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\tthis.fullScreen = false;\n\n\tthis.rotateSpeed = 1.0;\n\tthis.zoomSpeed = 1.2;\n\tthis.panSpeed = 0.3;\n\n\tthis.noRotate = false;\n\tthis.noZoom = false;\n\tthis.noPan = true;\n\tthis.noRoll = false;\n\n\tthis.staticMoving = false;\n\tthis.dynamicDampingFactor = 0.2;\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\n\n\t// internals\n\tthis.targetMesh;\n\tthis.target = new THREE.Vector3();\n\tthis.target0 = this.target.clone();\n\tthis.position0; //this.camera.position.clone();\n\tthis.up0; //= this.camera.up.clone();\n\n\tvar EPS = 0.000001;\n\n\tvar lastPosition = new THREE.Vector3();\n\n\tvar _state = STATE.NONE,\n\t_prevState = STATE.NONE,\n\n\t_eye = new THREE.Vector3(),\n\n\t_rotation,\n\n\t_zoomStart = new THREE.Vector2(),\n\t_zoomEnd = new THREE.Vector2(),\n\n\t_touchZoomDistanceStart = 0,\n\t_touchZoomDistanceEnd = 0,\n\n\t_panStart = new THREE.Vector2(),\n\t_panEnd = new THREE.Vector2();\n\n\n\n\t// events\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start'};\n\tvar endEvent = { type: 'end'};\n\n\n\t// methods\n\t\n\tinitEvent();\n\n\tthis.init = function(camera, targetMesh) {\n\n\t\tthis.camera = camera;\n\t\tthis.cameraUp = camera.up.clone();\n\t\tthis.targetMesh = targetMesh;\n\n\t\t_rotation = new THREE.Quaternion();\n\t\t_rotation.setFromEuler(targetMesh.rotation.clone());\n\t\t// for reset \n\t\tthis.target = this.targetMesh.position.clone();\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.camera.position.clone();\n\t\tthis.up0 = this.camera.up.clone();\n\t}\n\n\tthis.changeTargetMesh = function(targetMesh) {\n\t\tthis.targetMesh = targetMesh;\n\t\tthis.target = this.targetMesh.position.clone();\n\t}\n\n\tthis.handleResize = function (winSize) {\n\t\tvar maxDisBase = 80;\n\t\tvar minDisBase = 10;\n\n\t\tthis.screen.left = winSize.left;\n\t\tthis.screen.top = winSize.top;\n\t\tthis.screen.width = winSize.width;\n\t\tthis.screen.height = winSize.height;\n\n\t\tthis.maxDistance = maxDisBase;\n\t\tthis.minDistance = minDisBase;\n\t};\n\n\tthis.handleEvent = function ( event ) {\n\n\t\tif ( typeof this[ event.type ] == 'function' ) {\n\n\t\t\tthis[ event.type ]( event );\n\n\t\t}\n\n\t};\n\n\tvar getMouseOnScreen = ( function () {\n\n\t\tvar vector = new THREE.Vector2();\n\n\t\treturn function ( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( pageX - _this.screen.left ) / _this.screen.width,\n\t\t\t\t( pageY - _this.screen.top ) / _this.screen.height\n\t\t\t);\n\n\t\t\treturn vector;\n\t\t};\n\n\t}() );\n\n\tvar getMouseProjectionOnBall = function(offsetX, offsetY) {\n\n\t\tvar radio = 0.5;\n        var deltaRotationQuaternion = new THREE.Quaternion()\n            .setFromEuler(new THREE.Euler(\n                offsetY * (Math.PI / 180) * radio,\n                offsetX * (Math.PI / 180) * radio,\n                0,\n                'XYZ'\n            ));\n        \n        _this.targetMesh.quaternion.multiplyQuaternions(deltaRotationQuaternion, _this.targetMesh.quaternion);\n\t};\n\n\n\tthis.rotateTarget = function() { \n\t\t\n\t\t//this.targetMesh.rotation.setFromQuaternion(_rotation, 'XYZ'); \n\t}\n\n\tthis.zoomCamera = function () {\n\n\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\tvar factor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\t\t\t_eye.multiplyScalar( factor );\n\n\t\t} else {\n\n\t\t\tvar factor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * _this.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.panCamera = (function(){\n\n\t\tvar mouseChange = new THREE.Vector2(),\n\t\t\tcameraUp = new THREE.Vector3(),\n\t\t\tpan = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\n\n\t\t\tif ( mouseChange.lengthSq() ) {\n\n\t\t\t\tmouseChange.multiplyScalar( _eye.length() * _this.panSpeed );\n\n\t\t\t\tpan.copy( _eye ).cross( _this.camera.up ).setLength( mouseChange.x );\n\t\t\t\tpan.add( cameraUp.copy( _this.camera.up ).setLength( mouseChange.y ) );\n\n\t\t\t\t_this.camera.position.add( pan );\n\t\t\t\t_this.target.add( pan );\n\n\t\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t\t_panStart.copy( _panEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( _this.dynamicDampingFactor ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t}());\n\n\tthis.checkDistances = function () {\n\n\t\tif ( !_this.noZoom || !_this.noPan ) {\n\n\t\t\tif ( _eye.lengthSq() > _this.maxDistance * _this.maxDistance ) {\n\n\t\t\t\t_this.camera.position.addVectors( _this.target, _eye.setLength( _this.maxDistance ) );\n\n\t\t\t}\n\n\t\t\tif ( _eye.lengthSq() < _this.minDistance * _this.minDistance ) {\n\n\t\t\t\t_this.camera.position.addVectors( _this.target, _eye.setLength( _this.minDistance ) );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.update = function () { \n\t\tif (!this.enabled) return;  \n\n\t\t_eye.subVectors( _this.camera.position, _this.target );\n\n\t\tif ( !_this.noRotate ) {\n\n\t\t\t_this.rotateTarget();\n\n\t\t}\n\n\t\tif ( !_this.noZoom ) {\n\n\t\t\t_this.zoomCamera();\n\n\t\t}\n\n\t\tif ( !_this.noPan ) {\n\n\t\t\t_this.panCamera();\n\n\t\t}\n\n\t\t_this.camera.position.addVectors( _this.target, _eye );\n\n\t\t_this.checkDistances();\n\n\t\t_this.camera.lookAt( _this.target );\n\n\t\tif ( lastPosition.distanceToSquared( _this.camera.position ) > EPS ) {\n\n\t\t\t//_this.dispatchEvent( changeEvent );\n\n\t\t\tlastPosition.copy( _this.camera.position );\n\n\t\t}\n\n\t};\n\n\tthis.resize = function () {\n\n\t\t_state = STATE.NONE;\n\t\t_prevState = STATE.NONE;\n\n\t\t_this.target.copy( _this.target0 );\n\t\t_this.camera.position.copy( _this.position0 );\n\t\t_this.camera.up.copy( _this.up0 );\n\n\t\t_eye.subVectors( _this.camera.position, _this.target );\n\n\t\t_this.camera.lookAt( _this.target );\n\n\t\t_this.dispatchEvent( changeEvent );\n\n\t\tlastPosition.copy( _this.camera.position );\n\n\t};\n\n\n\t// event handle\n\n\tvar mousePreX = 0;\n\tvar mousePreY = 0;\n\n\tfunction isInScreen(x, y) {\n\t\tif ((x > _this.screen.left && x < _this.screen.left + _this.screen.width &&\n\t\t\ty > _this.screen.top && y < _this.screen.top + _this.screen.height) || _this.fullScreen) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tfunction mousedown( event ) {  \n\n\t\tif ( _this.enabled === false || !isInScreen(event.pageX, event.pageY)) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.NONE ) {\n\t\t\t_state = event.button;\n\t\t}\n\n\t\tif ( _state === STATE.ROTATE && !_this.noRotate ) {\n\t\t\tmousePreX = event.pageX;\n\t\t\tmousePreY = event.pageY;\n\n\t\t} else if ( _state === STATE.ZOOM && !_this.noZoom ) {\n\n\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_zoomEnd.copy(_zoomStart);\n\n\t\t} else if ( _state === STATE.PAN && !_this.noPan ) {\n\n\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_panEnd.copy(_panStart)\n\n\t\t}\n\n\t\tdocument.addEventListener( 'mousemove', mousemove, false );\n\t\tdocument.addEventListener( 'mouseup', mouseup, false );\n\n\t\t//_this.dispatchEvent( startEvent );\n\n\t}\n\n\n\t// event handle\n\tfunction mousemove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.ROTATE && !_this.noRotate ) {\n\n\t\t\tgetMouseProjectionOnBall( event.pageX - mousePreX, event.pageY - mousePreY) ;\n\n\t\t} else if ( _state === STATE.ZOOM && !_this.noZoom ) {\n\n\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t} else if ( _state === STATE.PAN && !_this.noPan ) {\n\n\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t}\n\t\tmousePreX = event.pageX;\n\t\tmousePreY = event.pageY;\n\n\t}\n\n\tfunction mouseup( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t_state = STATE.NONE;\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove );\n\t\tdocument.removeEventListener( 'mouseup', mouseup );\n\t\t//_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction mousewheel( event ) {\n\n\t\tif ( _this.enabled === false || !isInScreen(event.pageX, event.pageY)) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar delta = 0;\n\n\t\tif ( event.wheelDelta ) { // WebKit / Opera / Explorer 9\n\n\t\t\tdelta = event.wheelDelta / 40;\n\n\t\t} else if ( event.detail ) { // Firefox\n\n\t\t\tdelta = - event.detail / 3;\n\n\t\t}\n\n\t\t_zoomStart.y += delta * 0.01;\n\t\t//_this.dispatchEvent( startEvent );\n\t\t//_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction touchstart( event ) {\n\n\t\tif ( _this.enabled === false || !isInScreen(event.pageX, event.pageY)) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\tmousePreX = event.touches[ 0 ].pageX;\n\t\t\t\tmousePreY = event.touches[ 0 ].pageY;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t_panEnd.copy( _panStart );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t_state = STATE.NONE;\n\n\t\t}\n\t\t//_this.dispatchEvent( startEvent );\n\t}\n\n\tfunction touchmove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\tgetMouseProjectionOnBall( event.touches[ 0 ].pageX - mousePreX, event.touches[ 0 ].pageY - mousePreY);\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t_state = STATE.NONE;\n\n\t\t}\n\t\tmousePreX = event.touches[ 0 ].pageX;\n\t\tmousePreY = event.touches[ 0 ].pageY;\n\t}\n\n\tfunction touchend( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_rotateEnd.copy( getMouseProjectionOnBall( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_rotateStart.copy( _rotateEnd );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd = 0;\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t_panStart.copy( _panEnd );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_state = STATE.NONE;\n\t\t//_this.dispatchEvent( endEvent );\n\t}\n\n\tfunction initEvent() {\n\t\t_this.domElement.addEventListener( 'contextmenu', function ( event ) { event.preventDefault(); }, false );\n\n\t\t_this.domElement.addEventListener( 'mousedown', mousedown, false );\n\n\t\t_this.domElement.addEventListener( 'mousewheel', mousewheel, false );\n\t\t_this.domElement.addEventListener( 'DOMMouseScroll', mousewheel, false ); // firefox\n\n\t\t_this.domElement.addEventListener( 'touchstart', touchstart, false );\n\t\t_this.domElement.addEventListener( 'touchend', touchend, false );\n\t\t_this.domElement.addEventListener( 'touchmove', touchmove, false );\t\t\n\t}\n}\n\n\nmodule.exports = TrackballControls;\n\n\n/** WEBPACK FOOTER **\n ** ./js/common/m3-trackballcontrol.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./css/common.scss\n ** module id = 22\n ** module chunks = 0\n **/"],"sourceRoot":""}